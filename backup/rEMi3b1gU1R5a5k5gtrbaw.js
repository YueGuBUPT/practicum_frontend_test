(function() {var d,h="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global?global:this;function aa(){h.Symbol||(h.Symbol=ba);aa=function(){}}var ca=0;function ba(a){return"jscomp_symbol_"+a+ca++}function da(){aa();h.Symbol.iterator||(h.Symbol.iterator=h.Symbol("iterator"));da=function(){}}function ea(a){da();aa();da();var b=a[Symbol.iterator];if(b)return b.call(a);var c=0;return{next:function(){return c<a.length?{done:!1,value:a[c++]}:{done:!0}}}}
function fa(a){if(!(a instanceof Array)){a=ea(a);for(var b,c=[];!(b=a.next()).done;)c.push(b.value);a=c}return a}function ha(a,b){function c(){}c.prototype=b.prototype;a.prototype=new c;a.prototype.constructor=a;for(var e in b)if(Object.defineProperties){var f=Object.getOwnPropertyDescriptor(b,e);f&&Object.defineProperty(a,e,f)}else a[e]=b[e]}function ia(){}
function ja(a,b,c){for(var e=[],f=2;f<arguments.length;++f)e[f-2]=arguments[f];if(!a)throw Error(2>arguments.length?"invalid argument":ka.apply(ia,[].concat([b],fa(e))));}function la(a,b,c){for(var e=[],f=2;f<arguments.length;++f)e[f-2]=arguments[f];if(!a)throw Error(2>arguments.length?"invalid state":ka.apply(ia,[].concat([b],fa(e))));}
function l(a,b,c){for(var e=[],f=2;f<arguments.length;++f)e[f-2]=arguments[f];if(null==a)throw Error(2>arguments.length?"argument is null":ka.apply(ia,[].concat([b],fa(e))));return a}function ka(a,b){for(var c=[],e=1;e<arguments.length;++e)c[e-1]=arguments[e];var f=0;return a.replace(/\{}/g,function(){return f<c.length?c[f++]:"{}"})};function r(a){this.type=a}r.prototype.required=function(a,b){b=b[a];if(null==b||typeof b!=this.type)throw new TypeError("expected "+this.type+' for property "'+a+'", found: '+JSON.stringify(b));return b};r.prototype.optional=function(a,b){b=b[a];if(null!=b&&typeof b!=this.type)throw new TypeError("expected optional "+this.type+' for property "'+a+'", found: '+JSON.stringify(b));return b};
r.prototype.Se=function(a,b){b=b[a];if(null!=b)if(Array.isArray(b))for(a=0;a<b.length;a++)this.required(String(a),b);else throw new TypeError("expected repeated "+this.type+' for property "'+a+'", found: '+JSON.stringify(b));return b};var t=new r("string"),ma=new r("boolean"),na=new r("number"),oa=new r("object");function pa(a,b,c){return(b=oa.optional(b,c))?a(b):b}function qa(a){this.type=a}
qa.prototype.required=function(a,b){if(null==b||typeof b!=this.type)throw new TypeError("expected "+this.type+' for property "'+a+'", found: '+JSON.stringify(b));return b};qa.prototype.optional=function(a,b){if(null!=b){if(typeof b!=this.type)throw new TypeError("expected optional "+this.type+' for property "'+a+'", found: '+JSON.stringify(b));return b}};
qa.prototype.Se=function(a,b){if(!Array.isArray(b))throw new TypeError("expected repeated "+this.type+' for property "'+a+'", found: '+JSON.stringify(b));if(0!=b.length){for(var c=0;c<b.length;c++)this.required(a+"["+String(c)+"]",b[c]);return b}};var ra=new qa("string"),sa=new qa("number");function ta(){}ta.prototype.now=function(){return Date.now()};var ua=new ta;var u=new va;function va(){}d=va.prototype;d.setInterval=function(a,b){return window.setInterval(a,b)};d.clearInterval=function(a){window.clearInterval(a)};d.setTimeout=function(a,b){return window.setTimeout(a,b)};d.clearTimeout=function(a){window.clearTimeout(a)};d.requestAnimationFrame=function(a){return window.requestAnimationFrame(a)};d.cancelAnimationFrame=function(a){window.cancelAnimationFrame(a)};function wa(a){window.requestAnimationFrame(function(){window.requestAnimationFrame(a)})};function w(a){this.Ff=a.fallback;this.Fe=a.localePrecedence;this.zd={};this.u=a.messages;this.Kg=this.Fe[0];this.Wg=!!a.returnKeys}w.prototype.format=function(a,b){if(this.Wg)return[].join.call(arguments,":");var c=xa(this,a);return c.format.call(c,[].slice.call(arguments,1))};
function xa(a,b){if(a.zd.hasOwnProperty(b))return a.zd[b];var c=a.Kg,e;a.Fe.some(function(c){e=a.u[c]&&a.u[c][b];return void 0!==e});e||(c=a.Ff,e=a.u[c]&&a.u[c][b]);if(!e)throw Error("Unknown message: "+b);c=new IntlMessageFormat(e,c,ya);return a.zd[b]=c}var ya={number:{currency:{style:"currency",currency:"USD"},integer:{maximumFractionDigits:0},fixed2:{minimumFractionDigits:2,maximumFractionDigits:2}}};function za(){this.ka=window.cmsg;this.Z=this.ha=this.hd=this.Cd=this.N=null}function Aa(a){a.ne||(a.ne=new Ba(a.ka));return a.ne}function Ca(a){a.de||(a.de=new Da(a.ka));return a.de}function Ea(a){a.N||(a.N=new Fa(a.ka));return a.N}function Ga(a){a.hd||(a.hd=new Ha(a.ka));return a.hd}function Ia(a){a.Z||(a.Z=new Ja(a.ka));return a.Z}(function(a){w.apply(this,arguments)}).prototype=Object.create(w.prototype);(function(a){w.apply(this,arguments)}).prototype=Object.create(w.prototype);
(function(a){w.apply(this,arguments)}).prototype=Object.create(w.prototype);function Fa(a){w.apply(this,arguments)}Fa.prototype=Object.create(w.prototype);d=Fa.prototype;d.ee=function(){return this.format("creditCardCardNumberPlaceholder")};d.Ie=function(){return this.format("creditCardMonthPlaceholder")};d.cf=function(){return this.format("creditCardYearPlaceholder")};d.ke=function(){return this.format("creditCardCvcPlaceholder")};d.save=function(){return this.format("creditCardSave")};
(function(a){w.apply(this,arguments)}).prototype=Object.create(w.prototype);function Ba(a){w.apply(this,arguments)}Ba.prototype=Object.create(w.prototype);Ba.prototype.Qb=function(){return this.format("documentPlaceholderText")};Ba.prototype.Yb=function(){return this.format("documentUntitledDesign")};(function(a){w.apply(this,arguments)}).prototype=Object.create(w.prototype);(function(a){w.apply(this,arguments)}).prototype=Object.create(w.prototype);function Ka(a){w.apply(this,arguments)}
Ka.prototype=Object.create(w.prototype);Ka.prototype.$b=function(){return this.format("editorControlsUpgrade")};Ka.prototype.download=function(){return this.format("editorControlsDownload")};function La(a){w.apply(this,arguments)}La.prototype=Object.create(w.prototype);La.prototype.error=function(){return this.format("homeDesignError")};function Ma(a){w.apply(this,arguments)}Ma.prototype=Object.create(w.prototype);Ma.prototype.error=function(){return this.format("sharedDesignsError")};
Ma.prototype.title=function(){return this.format("sharedDesignsTitle")};function Na(a){w.apply(this,arguments)}Na.prototype=Object.create(w.prototype);Na.prototype.Tb=function(){return this.format("homeTitleSearchResults")};(function(a){w.apply(this,arguments)}).prototype=Object.create(w.prototype);function Oa(a){w.apply(this,arguments)}Oa.prototype=Object.create(w.prototype);d=Oa.prototype;d.title=function(){return this.format("designImporterTitle")};d.prompt=function(){return this.format("designImporterPrompt")};
d.deselectAll=function(){return this.format("designImporterDeselectAll")};d.empty=function(){return this.format("designImporterEmpty")};d.Yb=function(){return this.format("designImporterUntitledDesign")};(function(a){w.apply(this,arguments)}).prototype=Object.create(w.prototype);function Pa(a){w.apply(this,arguments)}Pa.prototype=Object.create(w.prototype);Pa.prototype.Je=function(a){return this.format("findUserInputNoResults",a)};Pa.prototype.error=function(){return this.format("findUserInputError")};
(function(a){w.apply(this,arguments)}).prototype=Object.create(w.prototype);function Qa(a){w.apply(this,arguments)}Qa.prototype=Object.create(w.prototype);Qa.prototype.Ee=function(){return this.format("likeButtonLiked")};function Ra(a){w.apply(this,arguments)}Ra.prototype=Object.create(w.prototype);Ra.prototype.empty=function(){return this.format("designStreamEmpty")};Ra.prototype.error=function(a,b){return this.format("designStreamError",a,b)};function Sa(a){w.apply(this,arguments)}
Sa.prototype=Object.create(w.prototype);d=Sa.prototype;d.title=function(){return this.format("docTypeSelectorTitle")};d.error=function(){return this.format("docTypeSelectorError")};d.times=function(){return this.format("docTypeSelectorTimes")};d.width=function(){return this.format("docTypeSelectorWidth")};d.height=function(){return this.format("docTypeSelectorHeight")};d.gd=function(){return this.format("docTypeSelectorDesign")};(function(a){w.apply(this,arguments)}).prototype=Object.create(w.prototype);
function Ta(a){w.apply(this,arguments)}Ta.prototype=Object.create(w.prototype);Ta.prototype.wa=function(a){return this.format("colorPickerBrandColor",a)};function Ua(a){w.apply(this,arguments)}Ua.prototype=Object.create(w.prototype);Ua.prototype.save=function(){return this.format("editorFileMenuPaneSave")};function Va(a){w.apply(this,arguments)}Va.prototype=Object.create(w.prototype);Va.prototype.times=function(){return this.format("customDimensionsPaneTimes")};
(function(a){w.apply(this,arguments)}).prototype=Object.create(w.prototype);(function(a){w.apply(this,arguments)}).prototype=Object.create(w.prototype);(function(a){w.apply(this,arguments)}).prototype=Object.create(w.prototype);function Wa(a){w.apply(this,arguments)}Wa.prototype=Object.create(w.prototype);Wa.prototype.lineHeight=function(){return this.format("editorToolbarLineHeight")};Wa.prototype.letterSpacing=function(){return this.format("editorToolbarLetterSpacing")};
function Da(a){w.apply(this,arguments)}Da.prototype=Object.create(w.prototype);function Xa(a){return a.format("canvaForWorkUpgradeTeamBrandKitsTitle")}function Ya(a){return a.format("canvaForWorkUpgradeLayoutCreatorsTitle")}function Za(a){return a.format("canvaForWorkUpgradeMagicallyResizeTitle")}function $a(a){return a.format("canvaForWorkUpgradePhotoFoldersTitle")}function ab(a){w.apply(this,arguments)}ab.prototype=Object.create(w.prototype);ab.prototype.title=function(){return this.format("shareViewTitle")};
ab.prototype.post=function(){return this.format("shareViewPost")};ab.prototype.link=function(){return this.format("shareViewLink")};ab.prototype.send=function(){return this.format("shareViewSend")};function bb(a){w.apply(this,arguments)}bb.prototype=Object.create(w.prototype);bb.prototype.title=function(){return this.format("exportPopOverTitle")};(function(a){w.apply(this,arguments)}).prototype=Object.create(w.prototype);function cb(a){w.apply(this,arguments)}cb.prototype=Object.create(w.prototype);
cb.prototype.title=function(a){return this.format("shareDialogTitle",a)};function db(a){w.apply(this,arguments)}db.prototype=Object.create(w.prototype);db.prototype.title=function(){return this.format("emailDialogTitle")};db.prototype.progress=function(){return this.format("emailDialogProgress")};function eb(a){w.apply(this,arguments)}eb.prototype=Object.create(w.prototype);eb.prototype.total=function(a){return this.format("publishViewTotal",a)};function fb(a){w.apply(this,arguments)}
fb.prototype=Object.create(w.prototype);fb.prototype.Sf=function(){return this.format("brandTeamMembersMembers")};fb.prototype.$b=function(){return this.format("brandTeamMembersUpgrade")};(function(a){w.apply(this,arguments)}).prototype=Object.create(w.prototype);(function(a){w.apply(this,arguments)}).prototype=Object.create(w.prototype);(function(a){w.apply(this,arguments)}).prototype=Object.create(w.prototype);(function(a){w.apply(this,arguments)}).prototype=Object.create(w.prototype);
function gb(a){w.apply(this,arguments)}gb.prototype=Object.create(w.prototype);gb.prototype.kb=function(){return this.format("twentyThreeSecondOnboardingSearchText")};(function(a){w.apply(this,arguments)}).prototype=Object.create(w.prototype);function hb(a){w.apply(this,arguments)}hb.prototype=Object.create(w.prototype);d=hb.prototype;d.eh=function(){return this.format("userMenuSettings")};d.th=function(){return this.format("userMenuViewProfile")};d.Ed=function(){return this.format("userMenuPersonalBrand")};
d.signOut=function(){return this.format("userMenuSignOut")};d.$b=function(){return this.format("userMenuUpgrade")};function ib(a){w.apply(this,arguments)}ib.prototype=Object.create(w.prototype);d=ib.prototype;d.wd=function(){return this.format("notificationPopOverLoading")};d.Rf=function(){return this.format("notificationPopOverLoadingOlder")};d.Qf=function(){return this.format("notificationPopOverLoadingNewer")};function jb(a,b,c){return a.format("notificationPopOverCommented",b,c)}
function kb(a,b,c){return a.format("notificationPopOverFollowed",b,c)}function lb(a,b){return a.format("notificationPopOverFollowedMe",b)}d.Ee=function(a,b){return this.format("notificationPopOverLiked",a,b)};function mb(a,b,c){return a.format("notificationPopOverPublished",b,c)}d.Yb=function(){return this.format("notificationPopOverUntitledDesign")};d.xf=function(){return this.format("notificationPopOverEmptyListMessage")};d.yf=function(){return this.format("notificationPopOverEmptyListQuip")};
d.wf=function(){return this.format("notificationPopOverEmptyListButtonLabel")};d.Df=function(){return this.format("notificationPopOverErrorMessage")};d.Ug=function(){return this.format("notificationPopOverRetryAfterErrorButtonLabel")};function Ha(a){w.apply(this,arguments)}Ha.prototype=Object.create(w.prototype);Ha.prototype.Je=function(){return this.format("designSearchNoResults")};function nb(a,b){return a.format("designSearchResultCount",b)}(function(a){w.apply(this,arguments)}).prototype=Object.create(w.prototype);
function ob(a){w.apply(this,arguments)}ob.prototype=Object.create(w.prototype);ob.prototype.wd=function(){return this.format("teamBillingLoading")};(function(a){w.apply(this,arguments)}).prototype=Object.create(w.prototype);(function(a){w.apply(this,arguments)}).prototype=Object.create(w.prototype);(function(a){w.apply(this,arguments)}).prototype=Object.create(w.prototype);(function(a){w.apply(this,arguments)}).prototype=Object.create(w.prototype);function pb(a){w.apply(this,arguments)}
pb.prototype=Object.create(w.prototype);pb.prototype.title=function(){return this.format("shareFolderDialogTitle")};pb.prototype.readOnly=function(){return this.format("shareFolderDialogReadOnly")};pb.prototype.remove=function(){return this.format("shareFolderDialogRemove")};function qb(a){w.apply(this,arguments)}qb.prototype=Object.create(w.prototype);qb.prototype.copy=function(){return this.format("lightboxCopyButton")};qb.prototype.next=function(){return this.format("lightboxNext")};
qb.prototype.previous=function(){return this.format("lightboxPrevious")};qb.prototype.page=function(){return this.format("lightboxPage")};function rb(a){w.apply(this,arguments)}rb.prototype=Object.create(w.prototype);d=rb.prototype;d.tf=function(a){return this.format("teamUpgradeCreateTeamWelcomeTitleHtml",a)};d.uf=function(){return this.format("teamUpgradeCreateYourTeam")};d.sf=function(a){return this.format("teamUpgradeCreateTeamWelcomeDescription",a)};
d.ge=function(a){return this.format("teamUpgradeCreateTrialPeriodPoint1Html",a)};d.he=function(){return this.format("teamUpgradeCreateTrialPeriodPoint2")};d.ie=function(){return this.format("teamUpgradeCreateTrialPeriodPoint3Html")};function Ja(a){w.apply(this,arguments)}Ja.prototype=Object.create(w.prototype);d=Ja.prototype;d.mf=function(a){return this.format("teamBillingSignupClaimHtml",a)};d.$b=function(a){return this.format("teamBillingSignupUpgrade",a)};d.ih=function(){return this.format("teamBillingSignupStartTrial")};
d.Xg=function(){return this.format("teamBillingSignupRevertCard")};d.Of=function(){return this.format("teamBillingSignupItemsTitle")};d.jf=function(){return this.format("teamBillingSignupBillingError")};d.oh=function(){return this.format("teamBillingSignupTryAgain")};d.Bf=function(){return this.format("teamBillingSignupEncryption")};(function(a){w.apply(this,arguments)}).prototype=Object.create(w.prototype);(function(a){w.apply(this,arguments)}).prototype=Object.create(w.prototype);
(function(a){w.apply(this,arguments)}).prototype=Object.create(w.prototype);(function(a){w.apply(this,arguments)}).prototype=Object.create(w.prototype);(function(a){w.apply(this,arguments)}).prototype=Object.create(w.prototype);(function(a){w.apply(this,arguments)}).prototype=Object.create(w.prototype);(function(a){w.apply(this,arguments)}).prototype=Object.create(w.prototype);(function(a){w.apply(this,arguments)}).prototype=Object.create(w.prototype);function sb(a){w.apply(this,arguments)}
sb.prototype=Object.create(w.prototype);sb.prototype.wd=function(){return this.format("invoiceLoading")};sb.prototype.title=function(){return this.format("invoiceTitle")};sb.prototype.total=function(){return this.format("invoiceTotal")};function tb(a){w.apply(this,arguments)}tb.prototype=Object.create(w.prototype);tb.prototype.fill=function(){return this.format("zoomToolbarFill")};(function(a){w.apply(this,arguments)}).prototype=Object.create(w.prototype);
(function(a){w.apply(this,arguments)}).prototype=Object.create(w.prototype);var ub=1<window.devicePixelRatio;window.navigator.userAgent.match(/Macintosh/);function vb(a){this.i=a.i;this.j=a.j;this.Ma=a.Ma;this.Ya=a.Ya;this.Lh=this.gd=null;this.xc=[];this.ready=!1;this.bb=a.bb;this.Ba=a.Ba;this.ga=a.ga}
function wb(a,b){b=$.extend({},b);a.gd&&(b.design=a.gd);b.experience=a.bb;for(var c in a.Ba)a.Ba.hasOwnProperty(c)&&(b["Experiment:"+c]=a.Ba[c]);a.j&&(b.brand=a.j);a.Ma&&(b.cohort=a.Ma);a.Ya&&(b.tier=a.Ya);try{var e=window.crypto||window.msCrypto,f=new Uint8Array(16);e.getRandomValues(f);b.insert_id=btoa(String.fromCharCode.apply(null,f))}catch(g){}return b}d=vb.prototype;d.track=function(){};d.identify=function(a){this.i=a};d.alias=function(){};d.set=function(){};d.union=function(){};
function xb(a,b,c,e,f){var g={};g.type=b;g.section=c;g.subsection="sidebar";g.location=e;f&&_.extend(g,f);a.track("button_click",g)}function yb(a,b){a.track("upgrade_cta_clicked",{location:b,variant:void 0})};function zb(a){vb.call(this,{bb:a.bb,Ba:a.Ba,i:a.i,j:a.j,Ma:a.Ma,Ya:a.Ya,ga:function(a,c,e){window.console.log("Google track: ",a,c,e)},Oh:function(a){window.console.log("Facebook track pixelId: ",a)},si:function(a){window.console.log("Twitter trackPid: ",a)}})}_.extend(zb.prototype,vb.prototype);d=zb.prototype;d.track=function(a,b){window.console.log("analytics:track",this.i,a,wb(this,b))};d.identify=function(a,b,c,e){this.i=a;window.console.log("analytics:identify",a,b,c,e)};
d.alias=function(a){window.console.log("analytics:alias",this.i,a);this.i=a};d.set=function(a,b){window.console.log("analytics:set",this.i,a);b&&window.setTimeout(b,0)};d.union=function(a){window.console.log("analytics:union",this.i,a)};function Ab(a){function b(b){for(this.ready=!0;this.xc&&0<this.xc.length;)this.xc.shift()();this.xc=null;if(b&&a.i){var c=(new UAParser).getResult();b=c.browser.name;var g=c.browser.version,k=c.device.type,c=c.os.name;k||"Android"!=c&&"iOS"!=c||(k="mobile");this.set({"Most recent browser":b+" "+g,timezone:(new Date).getTimezoneOffset()/-60});this.union({"Operating Systems":[c],Browsers:[b],Devices:[k]})}}vb.call(this,a);var c=window.analytics;c&&(c.ready(b.bind(this,!Bb)),Bb||(Bb=!0,c.load(a.lh),
c.page()))}var Bb=!1;_.extend(Ab.prototype,vb.prototype);d=Ab.prototype;d.track=function(a,b){window.analytics&&window.analytics.track(a,wb(this,b))};d.identify=function(a,b,c,e){"object"==typeof b&&(b={id:b.id,username:b.username,personalBrand:b.Ed,displayName:b.displayName,largeAvatarUrl:b.$h,roles:b.Yg,onboarding:b.fi});window.analytics&&window.analytics.identify(a,b,c,e)};d.alias=function(a){window.analytics&&window.analytics.alias(a)};
d.set=function(a,b){window.analytics&&window.analytics.identify(a,b)};d.union=function(){};function Cb(){var a=window.analyticsConfig,b=window.ga,c=a.user,e=a.brand,f=a.cohort,g=a.tier,k=String(a.experience),n=a.experiments,q=a.impl;switch(q){case "console":a=new zb({bb:k,Ba:n,i:c,j:e,Ma:f,Ya:g});break;case "segment":a=new Ab({lh:a.segmentWriteKey,bb:k,Ba:n,i:c,j:e,Ma:f,Ya:g,ga:b});break;default:throw Error("Cant find analytics implementation "+q);}c&&a.identify(c);return a};function x(a,b){if(!a)throw new TypeError("Cannot adopt constructor "+a);if("object"!==typeof b)throw new TypeError("Cannot adopt non-object value "+b);if(null===b)throw new TypeError("Cannot adopt null value");return Object.create(a.prototype,Db(b))}function Db(a){var b=Object.create(null);Object.keys(a).forEach(function(c){b[c]={value:a[c],writable:!0,enumerable:!0,configurable:!0}});return b};function Eb(a){this.name=a;this.defaultValue=!1}function Fb(a){this.values=a||{}}Fb.prototype.get=function(a){return a.name in this.values?this.values[a.name]:a.defaultValue};function Gb(){this.ld=new Fb(window.cflags)}var Hb=new Eb("bg"),Ib=new Eb("cd"),Jb=new Eb("dm");function y(){Error.captureStackTrace&&Error.captureStackTrace(this,y)}y.prototype=Object.create(Error.prototype);(function(){y.call(this)}).prototype=Object.create(y.prototype);(function(){y.call(this)}).prototype=Object.create(y.prototype);(function(){y.call(this)}).prototype=Object.create(y.prototype);function Kb(a){this.l=a;this.path="/documents"}d=Kb.prototype;d.duplicate=function(a){var b=this.path+"?duplicate\x3d"+encodeURIComponent(a.o());return A(this.l,b,a).get(0).then(Lb)};d.delete=function(a){return A(this.l,this.path+"/"+encodeURIComponent(a)+"?delete",null).return()};d.move=function(a,b,c){return A(this.l,this.path+"/"+encodeURIComponent(a)+"?move",{owner:{user:b,brand:c}}).get(0).get("doc")};
d.getDocument=function(a){a=[this.path,null!=a.doc?"/"+encodeURIComponent(a.doc):"",a.excludePages?"?excludePages":""].join("");return B(this.l,a).get(0).then(Mb)};d.search=function(a){a=this.path+"/search?"+Nb(a);return B(this.l,a).get(0).then(Ob)};function Qb(){this.remix=this.edit=this.view=this["default"]=null}function Rb(){}function Lb(a){return Object.freeze(x(Rb,a))}Rb.prototype.getDocument=function(){return Sb(this.document)};Rb.prototype.getSession=function(){return this.session};Rb.prototype.rd=function(){if(this.type)return Tb(this.type)};function Ub(){}function Mb(a){return Object.freeze(x(Ub,a))}Ub.prototype.getDocument=function(){return Sb(this.document)};function Vb(){}
function Nb(a){return Object.keys(a).map(function(b){if("object"!==typeof a[b])return b+"\x3d"+encodeURIComponent(a[b])}).filter(function(a){return!!a}).join("\x26")}function Wb(){}function Ob(a){return Object.freeze(x(Wb,a))}function Xb(){}function Yb(a){return Object.freeze(x(Xb,a))}Xb.prototype.eb=function(){return this.title};Xb.prototype.o=function(){return this.id};Xb.prototype.pc=function(){var a=this.thumbnail;return a?$.extend(new Zb,a):null};function $b(){}$b.prototype.o=function(){return this._id};
$b.prototype.eb=function(){try{return this.draft.content.title.trim()||null}catch(a){return null}};$b.prototype.getVersion=function(){var a=this.draft;return a?a.version:-1};function Sb(a){var b=new $b;$.extend(b,a);a=a.extensions;var c=new Qb;a&&$.extend(c,a);b.extensions=c;return b}function ac(a){return Sb(a)};function bc(){}bc.prototype.getName=function(){return this.name};bc.prototype.pc=function(){return this.thumbnail};function cc(){}function Tb(a){a.descriptions&&Object.keys(a.descriptions).forEach(function(b){a.descriptions[b]=Object.freeze(x(bc,a.descriptions[b]))});return Object.freeze(x(cc,a))}cc.prototype.pc=function(){if(this.thumbnail)return Object.freeze(x(dc,this.thumbnail))};function dc(){}dc.prototype.getKey=function(){return this.key};dc.prototype.ma=function(){return this.url};
cc.prototype.getName=function(){return this.name};cc.prototype.o=function(){return this.id};cc.prototype.D=function(){return this.brand};P.method(function(a){return A(this.l,this.url+"/~",a).get(0).then(ec)});P.method(function(a){a=this.url+"/~?"+a.ri();return B(this.l,a).get(0).then(fc)});P.method(function(a){var b=this.ma(a.cb())+"?removeItems";return A(this.l,b,a).return()});P.method(function(a){a=this.ma(a.cb())+"?list\x26"+Nb(a);return B(this.l,a).get(0).then(gc)});P.method(function(a){var b=this.ma(a.Qh())+"?moveItems";return A(this.l,b,a).return()});
P.method(function(a){var b;if(a.cb().systemFolder)throw Error("System folders cannot be updated");b=this.url+"/"+a.cb().o();return A(this.l,b,a).get(0).then(hc)});function ic(){}function hc(a){return Object.freeze(x(ic,a))}ic.prototype.cb=function(){if(this.folder)return C(this.folder)};function jc(a){a=void 0===a?{}:a;this.id=a.id||"";this.thumbnail=a.pi;this.systemFolder=a.mi||null;this.acl=a.zh;this.access=a.yh;this.name=a.name||null;this.description=a.description||null;this.brand=a.j||"";this.itemCount=a.Zh||0;this.user=a.i||"";this.modifiedDate=a.ei||0;this.shared=a.ki||!1;this.type=a.type||kc}var kc="DESIGN";
function C(a){return Object.freeze(x(jc,a))}d=jc.prototype;d.o=function(){return this.id};d.pc=function(){if(this.thumbnail)return Object.freeze(x(lc,this.thumbnail))};d.getName=function(){return this.name};d.D=function(){return this.brand};d.qa=function(){return this.user};d.rd=function(){return this.type};C({brand:"",id:"FACEBOOK",itemCount:0,modifiedDate:0,name:"Facebook",systemFolder:null,thumbnail:{height:200,url:"https://static.canva.com/static/images/upload_folder_facebook.png",width:200},user:""});
C({brand:"",id:"UPLOADED_MEDIA",itemCount:0,modifiedDate:0,name:null,systemFolder:null,thumbnail:{height:200,url:"https://static.canva.com/static/images/default_folder_thumbnail_grey_bg.png",width:200},user:""});C({brand:"",id:"ROYALTY_FREE",itemCount:0,modifiedDate:0,name:null,systemFolder:null,thumbnail:{height:200,url:"https://static.canva.com/static/images/purchased_folder_thumbnail.png",width:200},user:""});function lc(){}lc.prototype.ma=function(){return this.url};function mc(){}function gc(a){return Object.freeze(x(mc,a))}
mc.prototype.la=function(){return this.continuation};mc.prototype.cb=function(){if(this.folder)return C(this.folder)};function nc(){}function fc(a){return Object.freeze(x(nc,a))}nc.prototype.la=function(){return this.continuation};function oc(){}function ec(a){return Object.freeze(x(oc,a))}oc.prototype.cb=function(){if(this.folder)return C(this.folder)};P.method(function(a,b){function c(a){return 404===a}function e(){return k.Rh(a,b).catch(c,function(){return null})}function f(){return e().then(function(a){g++;var b;if(b=a)b=a.bundle.qd(),b="PENDING_SUBMISSION"!=b&&"PENDING_REVIEW"!=b;return b?a.bundle.qd()===pc?a:Promise.reject(a):P.delay(Math.round(3E3*Math.pow(1.6,g))).then(f).cancellable()})}var g=0,k=this;return f().timeout(36E5)});var pc="APPROVED";function Zb(a){a=void 0===a?{}:a;this.url=a.url||"";this.width=a.width||0;this.height=a.height||0;this.watermarked=a.ti||!1;this.page=a.page||0;this.quality=a.ii||null}Zb.prototype.ma=function(){return this.url};function qc(){this.prices={}}function rc(a,b,c){a.prices[b]=c;return a}rc(new qc,"ONE_USE",0);rc(rc(new qc,"ONE_USE",1),"ROYALTY_FREE",10);function sc(){};function tc(a,b){return location.protocol+"//"+location.host+"/design/"+encodeURIComponent(a)+""+(b?"/"+encodeURIComponent(b):"")};$(function(){$("menu .dropdown").on("mouseover",function(){var a=$(this),b=Number(a.data("timer"));null!=b&&clearTimeout(b);b=setTimeout(function(){a.parent().find("li.hover").not(a).removeClass("hover").addClass("hoverOff");a.removeClass("hoverOff").addClass("hover")},0);a.data("timer",b);a.on("mouseout",function(){var b=Number(a.data("timer"));null!=b&&clearTimeout(b);b=setTimeout(function(){a.off("mouseout").removeClass("hover").addClass("hoverOff")},500);a.data("timer",b)})})});function uc(){this.xhr=null}uc.prototype.cancel=function(){this.xhr&&(this.xhr.abort(),this.xhr=null)};uc.prototype.finish=function(){this.xhr=null};function D(a){this.Xc=a&&a.analyticsContext||null;this.ec=a&&a.authToken||null;this.fc=a&&a.authzToken||null;this.$c=a&&a.brandRestriction||null;this.ad=a&&a.buildName||null;this.bd=a&&a.buildSha||null;this.Aa=a&&a.csrfTokens||{};this.Hc=a&&a.serverRoot||null;this.$g=!!this.Hc;this.ah=this.Hc?this.Hc+"/_ajax":"/_ajax"}
function vc(){return new D(window.httpServiceConfig)}D.prototype.copy=function(a){var b={analyticsContext:this.Xc,authToken:this.ec,authzToken:this.fc,brandRestriction:this.$c,buildName:this.ad,buildSha:this.bd,serverRoot:this.Hc},c;for(c in a)b[c]=a[c];if(null===a.csrfTokens)c=null;else{c={};a=a.csrfTokens||{};for(var e in this.Aa)c[e]=this.Aa[e];for(e in a)c[e]=a[e]}b.csrfTokens=c;return new D(b)};function wc(a){var b=a.indexOf("/",1);return-1==b?a:a.substring(0,b)}
function xc(a){return 200<=a&&300>a}D.prototype.get=function(a,b){var c=new uc;this.send("GET",a,null,!0,null,c,null,b);return c};function B(a,b){var c;return(new P(function(e,f){c=a.get(b,function(a,b){xc(a)?e([b,a]):f([b,a])})})).cancellable().catch(P.CancellationError,function(a){c.cancel();throw a;})}D.prototype.post=function(a,b,c,e){var f=new uc;yc(this,"POST",a,b,!0,0,f,c,e);return f};
function A(a,b,c){var e;return(new P(function(f,g){e=a.post(b,c,null,function(a,b){xc(a)?f([b,a]):g([b,a])})})).cancellable().catch(P.CancellationError,function(a){e.cancel();throw a;})}function zc(a,b,c){var e=new uc;yc(a,"DELETE",b,null,!0,0,e,null,c);return e}function Ac(a,b){var c;return(new P(function(e,f){c=zc(a,b,function(a,b){xc(a)?e([b,a]):f([b,a])})})).cancellable().catch(P.CancellationError,function(a){c.cancel();throw a;})}
function yc(a,b,c,e,f,g,k,n,q){var m=wc(c);if(m in a.Aa){var p=a.Aa[m];a.send(b,c,e,f,p,k,n,function(v,z){418==v&&1>g?(a.Aa[m]==p&&delete a.Aa[m],yc(a,b,c,e,f,g+1,k,n,q)):(q&&q(v,z),k.finish())})}else a.send("GET","/csrf"+m,null,f,null,k,null,function(p,z){200==p?(m in a.Aa||(a.Aa[m]=String(z)),yc(a,b,c,e,f,g,k,n,q)):(q(p,null),k.finish())})}
D.prototype.send=function(a,b,c,e,f,g,k,n){function q(){4==p.readyState&&m()}function m(){var a,b,c;try{a=p.status;var e,f;try{e=p.getResponseHeader("X-Canva-Auth")}catch(k){}try{f=p.getResponseHeader("X-Canva-Authz")}catch(k){}e&&(v.ec="!"!=e?e:null);f&&(v.fc="!"!=f?f:null);b=p.responseText}catch(k){if(k.message&&k.message.match(/c00c023f/))a=0,b="";else throw g.finish(),k;}b=b&&b.trim?b.trim():"";e=b.substring(0,20);if(0<e.length){if("'\"])}while(1);\x3c/x\x3e//"!=e){n(500,null);g.finish();return}b=
b.substring(20);try{c=JSON.parse(b)}catch(k){n(500,null);g.finish();return}}else c=null;n(a,c);g.finish()}b=this.ah+b;var p=g.xhr=new XMLHttpRequest,v=this;p.open(a,b,e);this.$g&&(p.withCredentials=!0);"GET"!=a&&f&&p.setRequestHeader("X-Csrf-Token",f);this.Xc&&p.setRequestHeader("X-Canva-Analytics",this.Xc);this.ec&&p.setRequestHeader("X-Canva-Auth",this.ec);this.fc&&p.setRequestHeader("X-Canva-Authz",this.fc);this.$c&&p.setRequestHeader("X-Canva-Brand",this.$c);this.ad&&p.setRequestHeader("X-Canva-Build-Name",
this.ad);this.bd&&p.setRequestHeader("X-Canva-Build-Sha",this.bd);null===c?a=null:"object"==typeof c&&"undefined"!==typeof Blob&&c instanceof Blob?(p.setRequestHeader("Content-Type",c.type),k&&p.upload.addEventListener("progress",k,!1),a=c):(p.setRequestHeader("Content-Type","application/json;charset\x3dUTF-8"),a=JSON.stringify(c));e?(p.onreadystatechange=q,p.send(a)):(p.send(a),m())};function Bc(a){this.analytics=a.analytics;this.ja=[];this.cd=a.cd;this.Mc=a.Mc;this.button=a.gf;this.Bc=this.Fa=null;this.Cc=a.Cc;this.wb=this.Hb=this.Eb=this.Sd=null}d=Bc.prototype;d.trigger=Backbone.Events.trigger;d.on=Backbone.Events.on;d.off=Backbone.Events.off;function Cc(a){a.button.on("click",function(b){b.preventDefault();a.show();xb(a.analytics,"notification_bell","homepage","sidebar")})}
d.update=function(a){var b=this,c=new Dc({limit:10,Td:!a});this.wb&&this.wb.isPending()&&this.wb.cancel();return this.wb=Ec(this.Mc,c).then(function(c){Fc(b,c.events);b.Eb=c.read||null;var f=Gc(b),g=10===f;b.Hb=0===b.ja.length?null:b.ja[0].timestamp;c=c.throttle;var k=b.Fa;!0===c?k=Math.min(2*b.Fa,216E5):!1===c&&(k=Math.max(b.Fa-1E3,3E5));null!==k&&k!=b.Fa&&Hc(b,k);b.trigger("updateUnreadCount",f,g);a&&(b.Sd=Date.now())}).catch(function(a){return 403===a[1]},function(){window.clearInterval(b.Bc)}).catch(P.CancellationError,
$.noop)};
d.show=function(){function a(){k.$(".button.retry").prop("disabled",!0);g.update(!0).then(e).catch(c)}function b(){a();xb(g.analytics,"check_notifications","homepage","notifications_popover")}function c(){if(k){var a=k;Ic(a).html(a.Ef({errorMessage:a.G.Df(),retryAfterErrorButtonLabel:a.G.Ug()}));Jc(a)}}function e(a){k&&(Jc(k),Kc(k,g.ja,g.Eb,!!a),Lc(g))}function f(){k=null;g.trigger("updateUnreadCount",0,!1);Mc(g)}var g=this,k=function(){var a=g.cd();a.once("remove",f);a.on("retry",b);Nc(a,g.Cc?g.Cc:
g.button);return a}(),n=function(){var a=Gc(g);if(a=!(0<a&&0<g.ja.length-a))a=g,a=6E4<(null==a.Sd?Infinity:Date.now()-a.Sd);return a}();e(n);n&&a();window.clearInterval(g.Bc)};function Mc(a){function b(){c.update(!1).catch($.noop)}var c=a;a.Fa&&(a.Bc=window.setInterval(b,a.Fa))}function Hc(a,b){b!==a.Fa&&(window.clearInterval(a.Bc),a.Fa=b,Mc(a))}function Gc(a){return a.ja.filter(function(b){return b.timestamp>a.Eb}).length}
function Lc(a){null!=a.Hb&&a.Hb!=a.Eb&&Oc(a.Mc,new Pc({read:a.Hb})).then(function(){a.Eb=a.Hb})}function Fc(a,b){a.ja=_.uniq(a.ja.concat(b),!1,function(a){return a.id});a.ja.sort(function(a,b){return b.timestamp-a.timestamp});10<a.ja.length&&(a.ja.length=10)};function Qc(a){this.analytics=a.analytics;this.Ib=a.Ib;this.Xd=a.Xd;this.view=a.view;this.za=a.za;this.Pd=a.Pd;this.Pc=a.Pc}d=Qc.prototype;d.listenTo=Backbone.Events.listenTo;d.stopListening=Backbone.Events.stopListening;
d.start=function(){var a=this;this.Xd.init();Cc(this.Ib);window.setTimeout(function(){var b=a.Ib;b.update(!1).catch($.noop);Hc(b,3E5)},400);this.listenTo(this.Ib,{updateUnreadCount:a.view.dh.bind(a.view)});this.listenTo(this.view,{"click:upgrade":this.Lc,"click:newDesign":this.nh,"click:featureTour":this.mh});this.Pd&&this.Lc(null,!0)};d.Lc=function(a,b){a=this.za();a.on({hide:this.Dg,signup:this.Eg});b?a.show():(Rc(a),yb(this.analytics,"homepage_sidebar"))};
d.nh=function(){this.analytics.track("button_click",{type:"create_a_design",location:"sidebar"})};d.mh=function(){this.analytics.track("button_click",{type:"c4w_feature_tour",location:"sidebar"})};d.Dg=function(){this.Pc&&(window.location.href="/?onboarding")};d.Eg=function(){window.location.href=this.Pc?"/brand/onboarding/starter":"/brand/onboarding/upgrader"};function Sc(){}Sc=Backbone.View.extend({className:"sidebar"});Sc.prototype.initialize=function(a){this.F=a.F};Sc.prototype.events=function(){return{"click .sidebarUpgradeButton":this.trigger.bind(this,"click:upgrade"),"click .buttonNewDesign":this.trigger.bind(this,"click:newDesign"),"click .canvaForWorkFeatureTour":this.trigger.bind(this,"click:featureTour")}};
Sc.prototype.dh=function(a,b){var c=this.$(".notifications"),e=c.find(".notificationsBadge");a=Math.min(a,9);c.hasClass("hasNotifications")&&0===a&&(c.addClass("disappearing"),this.F.setTimeout(function(){c.removeClass("disappearing")},250));c.toggleClass("hasNotifications",0<a);c.toggleClass("hasMore",b);e.text(a)};function Tc(a){this.l=a;this.path="/profile"}Tc.prototype.qa=P.method(function(a){return B(this.l,this.path+"/users/"+encodeURIComponent(a)).get(0).then(Uc)});function Vc(a){return B(a.l,a.path+"/user/brands").spread(function(a){return a.brands.map(Wc)})}function Xc(a,b){return A(a.l,a.path+"/brands/"+encodeURIComponent(b.brand),b).get(0).then(Yc)}function Zc(a,b){return A(a.l,a.path+"/users/"+encodeURIComponent(b.user),b).get(0).then($c)}
Tc.prototype.D=function(a){return B(this.l,this.path+"/brands/"+encodeURIComponent(a)).get(0).then(Wc)};P.method(function(a){var b=this.path+"/brands/"+encodeURIComponent(a.D())+"/invitations";return A(this.l,b,a).spread(ad)});
P.method(function(a){a=this.path+"/brands/"+encodeURIComponent(a.D())+"/invitations?"+(null!=a.la()?"\x26continuation\x3d"+encodeURIComponent(a.la()):"")+(null!=a.vb()?"\x26limit\x3d"+encodeURIComponent(a.vb()):"")+(a.countOnly?"\x26countOnly\x3d"+encodeURIComponent(a.countOnly):"");return B(this.l,a).spread(bd)});P.method(function(a){var b=this.path+"/brands/"+encodeURIComponent(a.D())+"/invitations?update\x3dtrue";return A(this.l,b,a).spread(cd)});
Tc.prototype.Kf=P.method(function(a){a=this.path+"/brands/"+encodeURIComponent(a.D())+"/members?"+(a.includeAvatars?"\x26includeAvatars\x3d"+encodeURIComponent(a.includeAvatars):"")+(a.includeEmails?"\x26includeEmails\x3d"+encodeURIComponent(a.includeEmails):"")+(a.countOnly?"\x26countOnly\x3d"+encodeURIComponent(a.countOnly):"")+(null!=a.la()?"\x26continuation\x3d"+encodeURIComponent(a.la()):"")+(null!=a.vb()?"\x26limit\x3d"+encodeURIComponent(a.vb()):"");return B(this.l,a).spread(dd)});
P.method(function(a){var b=this.path+"/brands/"+encodeURIComponent(a.D())+"/members";return A(this.l,b,a).spread(ed)});function E(){}E.prototype.clone=function(){return Object.freeze(x(E,JSON.parse(JSON.stringify(this))))};E.prototype.equals=function(a){function b(a){for(var e in a){var f=a[e];null===f?delete a[e]:f instanceof Object&&b(f)}return a}return _.isEqual(b(JSON.parse(JSON.stringify(this))),b(JSON.parse(JSON.stringify(a))))};E.prototype.ze=function(){if(this.brandColor)return Object.freeze(x(fd,this.brandColor))};function fd(a){this.hexString=a.Wh;this.name=a.name}fd.prototype.getName=function(){return this.name};
function gd(){this.enabled=null;this.allowedReferrers=[]}gd.prototype.isEnabled=function(){return this.enabled};function hd(a){return a?x(gd,a):null}function id(){}function jd(){this.id="";this.brandname=this.displayName=null;this.thirdParty=this.contributor=this.personal=!1;this.billingInfo=this.brandKit=this.apiSettings=null}jd.prototype.o=function(){return this.id};jd.prototype.aa=function(){return this.displayName};jd.prototype.Cb=function(){return this.personal};
function Yc(a){if(!a)return null;a=x(jd,a);a.apiSettings=hd(a.apiSettings);a.brandKit&&(a.brandKit=Object.freeze(x(E,a.brandKit)));a.billingInfo&&(a.billingInfo=Object.freeze(x(id,a.billingInfo)));return a}function kd(a){a=void 0===a?{}:a;this.id=a.id||"";this.displayName=a.displayName||null;this.brandname=a.Ch||null;this.personal=a.gi||!1;this.contributor=a.Eh||!1;this.thirdParty=a.ni||!1;this.brandColor=a.wa||null}kd.prototype.o=function(){return this.id};kd.prototype.aa=function(){return this.displayName};
kd.prototype.Cb=function(){return this.personal};kd.prototype.ze=function(){return this.brandColor};function Wc(a){if(!a)return null;var b=x(kd,a);a.brandKit&&(b.brandKit=Object.freeze(x(E,a.brandKit)));return b}function ld(){this.brand="";this.billingInfo=this.hiddenMagicTemplates=this.personal=this.brandKit=this.apiSettings=this.displayName=this.brandname=null}ld.prototype.Zd=function(a){this.brand=a;return this};function md(a,b){a.apiSettings=b;return a}
function nd(a){a=void 0===a?{}:a;this.id=a.id||"UNKNOWN_USER_ID";this.username=a.username||"";this.personalBrand=a.Ed||"";this.displayName=a.displayName||"";this.homepage=a.Xh||null;this.city=a.Dh||null;this.countryCode=a.Gh||null;this.avatar=a.Bh||null;this.roles=a.Yg||[];this.deactivated=a.Jh||!1}d=nd.prototype;d.o=function(){return this.id};d.Qa=function(){return this.username};d.od=function(){return this.personalBrand};d.aa=function(){return this.displayName};d.nc=function(){return this.avatar};
d.pd=function(){return this.roles};function Uc(a){if(!a)return null;a=x(nd,a);a.avatar&&(a.avatar=od(a.avatar));return a}function pd(a){return Uc(a)}d.xe=function(a){var b=this.nc();return b&&(a=b.sizes&&b.sizes[a]||null)?a.ma():null};d.Ce=function(){return"UAAAAAAAAAA"===this.id};function qd(){}
function rd(){this.id="";this.creationDate=0;this.temporary=this.deactivated=!1;this.email=this.displayName="";this.emailVerified=!1;this.username="";this.userNotificationSettings=this.countryCode=this.city=this.homepage=null;this.avatars=[];this.facebook=this.credentials=this.avatar=null;this.apiDetails=this["google]"]=null;this.roles=[];this.personalBrand="";this.brands={};this.uiInfo=null;this.features=[]}d=rd.prototype;d.o=function(){return this.id};d.aa=function(){return this.displayName};
d.Qa=function(){return this.username};d.ye=function(){if(this.avatars)return this.avatars.map(od)};d.nc=function(){return this.avatar};function sd(a){if(a.apiDetails)return Object.freeze(x(td,a.apiDetails))}d.pd=function(){return this.roles};d.od=function(){return this.personalBrand};d.xe=function(a){var b=this.nc();return b&&(a=b.sizes&&b.sizes[a]||null)?a.ma():null};d.Ce=function(){return"UAAAAAAAAAA"===this.id};
d.Ye=function(){return Uc({id:this.id,username:this.username,personalBrand:this.personalBrand,displayName:this.displayName,homepage:this.homepage,city:this.city,countryCode:this.countryCode,avatar:this.avatar,roles:this.roles,deactivated:this.deactivated})};function td(){}function ud(a){a=void 0===a?{}:a;this.version=a.version||0;this.sizes=a.sizes||{}}ud.prototype.getVersion=function(){return this.version};ud.prototype.ye=function(){return this.sizes};
function od(a){if(!a)return null;a=x(ud,a);var b;var c=a.sizes,e={};if(c){for(b in c){var f=b,g;g=(g=c[b])?x(vd,g):null;e[f]=g}b=e}else b=null;a.sizes=b;return a}function vd(a){a=void 0===a?{}:a;this.size=a.size||0;this.width=a.width||0;this.height=a.height||0;this.url=a.url||""}vd.prototype.ma=function(){return this.url};od({version:0,sizes:{50:{size:50,width:50,height:50,url:"https://static.canva.com/static/images/default_avatar_50.png"},200:{size:200,width:200,height:200,url:"https://static.canva.com/static/images/default_avatar_200.png"}}});
function wd(){this.user="";this.generateApiKeyWithType=this.avatar=this.locale=this.countryCode=this.city=this.homepage=this.currentPassword=this.roles=this.displayName=this.password=this.username=this.emailVerified=this.email=null}wd.prototype.Zd=function(a){this.user=a;return this};function xd(a,b){a.generateApiKeyWithType=b;return a}function yd(){this.user=void 0;this.verificationEmailSent=null}yd.prototype.qa=function(){return this.user};
function $c(a){if(!a)return null;a=x(yd,a);var b;b=a.user;var c;b?(c=x(rd,b),c.avatar=od(c.avatar),b.userNotificationSettings&&(c.userNotificationSettings=x(qd,b.userNotificationSettings)),b=c):b=null;a.user=b;return a}function zd(){}function ad(a){return Object.freeze(x(zd,a))}function Ad(){}Ad.prototype.la=function(){return this.continuation};Ad.prototype.getCount=function(){return this.count};function bd(a){return Object.freeze(x(Ad,a))}function Bd(){}Bd.prototype.Yd=function(a){this.brand=a;return this};
Bd.prototype.D=function(){return this.brand};Bd.prototype.la=function(){return this.continuation};Bd.prototype.vb=function(){return this.limit};function Cd(){var a=new Bd;a.countOnly=!0;return a}function Dd(a){a=void 0===a?{}:a;this.members=a.Sf}Dd.prototype.la=function(){return this.continuation};Dd.prototype.getCount=function(){return this.count};function dd(a){return Object.freeze(x(Dd,a))}function Ed(){}Ed.prototype.D=function(){return this.brand};
function ed(a){return Object.freeze(x(Ed,a))}function Fd(){}function cd(a){return Object.freeze(x(Fd,a))};function Gd(a){this.l=a;this.path="/social"}function Ec(a,b){var c=b.Na;return B(a.l,a.path+"/user/notifications?limit\x3d"+encodeURIComponent(String(b.limit))+(b.Td?"\x26unreadOnly\x3dtrue":"")+(c?"\x26continuation\x3d"+encodeURIComponent(c):"")).get(0).then(Hd)}function Oc(a,b){return A(a.l,a.path+"/user/notifications",Id(b)).get(0).then(Jd)}Gd.prototype.createComment=function(a){return A(this.l,this.path+"/comments/"+encodeURIComponent(a.object),Kd(a)).get(0).then(Ld)};function Md(a){switch(a){case "COMMENT":return"COMMENT";case "FOLLOW":return"FOLLOW";case "LIKE":return"LIKE";case "PUBLICIFY":return"PUBLICIFY";default:throw new TypeError('expected ActivityVerb for property "action", found: '+JSON.stringify(a));}}function Nd(a){this.id=a.id;this.timestamp=a.timestamp;this.Qd=a.Qd;this.action=a.action;this.object=a.object;this.Me=a.Me}Nd.prototype.o=function(){return this.id};
function Od(a){var b=t.required("id",a),c=na.optional("timestamp",a)||0,e=Pd(oa.required("subject",a)),f;f=Md(t.required("action",a));return new Nd({id:b,timestamp:c,Qd:e,action:f,object:Pd(oa.required("object",a)),Me:Pd(oa.required("owner",a))})}function Qd(a){this.type=a.type;this.id=a.id;this.document=a.document;this.i=a.i}Qd.prototype.rd=function(){return this.type};Qd.prototype.o=function(){return this.id};Qd.prototype.getDocument=function(){return this.document};Qd.prototype.qa=function(){return this.i};
function Pd(a){var b;a:switch(b=t.required("type",a),b){case "DOCUMENT":b="DOCUMENT";break a;case "USER":b="USER";break a;default:throw new TypeError('expected ActorType for property "type", found: '+JSON.stringify(b));}return new Qd({type:b,id:t.required("id",a),document:pa(ac,"document",a),i:pa(pd,"user",a)})}function Kd(a){return{object:ra.required("object",a.object),content:ra.required("content",a.content)}}function Rd(a){this.id=a.id;this.je=a.je}Rd.prototype.o=function(){return this.id};
function Ld(a){return new Rd({id:t.required("id",a),je:na.optional("created",a)||0})}function Dc(a){this.i=a.i;this.Td=a.Td;this.limit=a.limit;this.Na=a.Na}Dc.prototype.qa=function(){return this.i};Dc.prototype.vb=function(){return this.limit};Dc.prototype.la=function(){return this.Na};function Sd(a){this.events=a.events||[];this.read=a.read;this.Na=a.Na;this.throttle=a.throttle}Sd.prototype.la=function(){return this.Na};
function Hd(a){var b;b=(b=oa.Se("events",a))?b.map(Od):b;var c=na.optional("read",a),e=t.optional("continuation",a);a=ma.optional("throttle",a);return new Sd({events:b,read:c,Na:e,throttle:a})}function Pc(a){this.i=a.i;this.read=a.read}Pc.prototype.qa=function(){return this.i};function Id(a){var b;b=ra.optional("user",a.i);a=a.read;a=0!==a?sa.required("read",a):void 0;return{user:b,read:a}}function Td(){}function Jd(){return new Td};$.fn.reverse=[].reverse;$.fn.forceLayout=function(){if(0===this.length)return this;var a=this.get(0);(a=window.getComputedStyle(a))&&a.getPropertyValue("left");return this};Array.max=function(a){return Math.max.apply(Math,a)};Array.min=function(a){return Math.min.apply(Math,a)};Array.lowerBound=function(a,b,c){!c&&(c=function(a,b){return a-b});for(var e=0,f,g=a.length,k;0<g;)f=e+(k=g/2|0),0>c(a[f],b)?(e=++f,g-=k+1):g=k;return e};
Array.upperBound=function(a,b,c){!c&&(c=function(a,b){return a-b});for(var e=0,f,g=a.length,k;0<g;)f=e+(k=g/2|0),0<=c(b,a[f])?(e=++f,g-=k+1):g=k;return e};Array.di=function(a,b,c){var e=a.map(b,c),f=Array.min(e);return a.filter(function(a,b){return e[b]==f})};$.fn.delay=function(a,b){jQuery.fx.step.delay=function(){};return this.animate({delay:1},a,b)};
function Ud(){var a,b,c="T"+"transform".slice(1),e=["Moz","Webkit","ms"],f=document.createElement("div");if("transform"in f.style)b="transform";else for(var g=0;g<e.length;g++)if(a=e[g]+c,a in f.style){b=a;break}return $.support.transform=b}$(function(){var a=Ud();a&&"transform"!==a&&($.cssHooks.transform={get:function(b){return $.css(b,a)},set:function(b,c){b.style[a]=c}})});
$(function(){function a(){var b=document.createElement("p"),c={webkitTransform:"-webkit-transform",OTransform:"-o-transform",msTransform:"-ms-transform",MozTransform:"-moz-transform",transform:"transform"},e;document.body.insertBefore(b,null);for(var f in c)if(void 0!==b.style[f]){b.style[f]="translate3d(1px,1px,1px)";e=window.getComputedStyle(b,null);if(!e){window.setTimeout(a,500);return}e.getPropertyValue(c[f])}document.body.removeChild(b)}a()});
(function(){for(var a=0,b=["ms","moz","webkit","o"],c=0;c<b.length&&!window.requestAnimationFrame;++c)window.requestAnimationFrame=window[b[c]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[b[c]+"CancelAnimationFrame"]||window[b[c]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(b){var c=(new Date).getTime(),g=Math.max(0,16-(c-a)),k=window.setTimeout(function(){b(c+g)},g);a=c+g;return k});window.cancelAnimationFrame||(window.cancelAnimationFrame=
function(a){clearTimeout(a)})})();$(Vd);function Wd(a){this.profiles=a}
Wd.prototype.init=function(a){var b=this;b.dc=a;b.ta=this.dc.referrers||[];Xd(b);$("#referrersDisplay").on("click",".referrerDelete",function(){var a=$(this).parent().data("referrer"),c=b.ta.slice(0),a=$.inArray(a,c);0<=a&&(c.splice(a,1),Yd(b,c))});$("#referrerInput").on("keypress",function(a){if(13==a.which){var c=$(this).val().trim();Zd(b,c);a.stopPropagation();return!1}});$d(b);a=$("#apiKeyTable");for(var c=b.dc.apiKeys||[],e=0;e<c.length;e++){var f=c[e],f=$("\x3ctr/\x3e").data("apiKeyDetails",
f).append($("\x3ctd/\x3e").addClass("keyLabel").text(f.displayName)).append($("\x3ctd/\x3e").addClass("keyValue").text(f.key)).append($("\x3ctd/\x3e").addClass("keyRegen").html("\x3cspan\x3eREGENERATE\x3c/span\x3e")).append($("\x3ctd/\x3e").addClass("keyButton").html('\x3cspan\x3e\x3ca href\x3d"http://about.canva.com/button/build/?key\x3d'+encodeURIComponent(f.key)+'" target\x3d"_blank"\x3eMAKE BUTTON\x3c/a\x3e\x3c/span\x3e'));a.append(f)}if(b.dc.enabled)$(a).on("click",".keyRegen span",function(){var a=
$(this).parent().parent(),c=a.data("apiKeyDetails");c&&(ae(),confirm("Are you sure you want to regenerate this key?\nThe old key will no longer be valid.")&&(c=xd((new wd).Zd(c.id),c.keyType),Zc(b.profiles,c).then(function(b){var c=sd(b.qa());$(a).find(".keyValue").fadeOut(100,function(){$(this).text(c.apiKey).fadeIn(100)});$(a).find(".keyButton span a").attr("href","http://about.canva.com/button/build/?key\x3d"+encodeURIComponent(c.apiKey));be("Key successfully regenerated")}).catch(function(){ce("Problem regenerating your key. Please try again")})))});
else $("#apiDisabled").show(),$("#apiKeys,#apiReferrers").hide()};function ae(){$("#message").removeClass("success").removeClass("error").empty().hide()}function be(a){var b=$("#message");b.removeClass("error").addClass("success").empty().text(a).show();setTimeout(function(){b.hasClass("error")||b.fadeOut(300,function(){b.empty().removeClass("success")})},1E3)}function ce(a){$("#message").removeClass("success").addClass("error").empty().text(a).show()}
function $d(a){a.ta&&0!=a.ta.length?$("#needOneReferrer").removeClass("needOneWarning"):$("#needOneReferrer").addClass("needOneWarning");a.ta&&10==a.ta.length?($("#referrerInput").hide(),$("#referrerMaxReached").show()):($("#referrerInput").show().focus(),$("#referrerMaxReached").hide())}
function Zd(a,b){if(b){var c=$("#referrerInput");if(/^[\*\?\.\w-]+$/.test(b)){var e=!1;$("#referrersDisplay").find("li").each(function(){var a=$(this).data("referrer");b==a&&($(this).fadeOut(100).fadeIn(100),e=!0)});if(e)c.val("");else{var f=a.ta.slice(0);f.push(b);Yd(a,f)}}else c.addClass("referrerError"),setTimeout(function(){c.removeClass("referrerError")},1E3)}}
function Xd(a){for(var b=$("#referrersDisplay").empty(),c=0;c<a.ta.length;c++){var e=a.ta[c],e=$("\x3cli/\x3e").addClass("referrerLine").data("referrer",e).text(e).append('\x3cspan class\x3d"referrerDelete"\x3ex\x3c/span\x3e');b.append(e)}}
function Yd(a,b){b=hd({allowedReferrers:b});b=md((new ld).Zd(a.dc.brand),b);ae();Xc(a.profiles,b).then(function(b){a.ta=b.apiSettings.allowedReferrers;Xd(a);$("#referrerInput").val("");$d(a);be("Referrers updated")}).catch(function(){ce("Problem saving your referrers. Please try again")})}function Vd(){(new Wd(new Tc(vc()))).init(window.apiDetails||{})};function de(a){this.l=a}d=de.prototype;d.yb=function(a){throw ee(a[0].errorKey);};d.Bb=function(a){return"CreditCardInvalid"===a[0].errorType};d.rf=P.method(function(a,b){return A(this.l,"/billing/brands/"+encodeURIComponent(a)+"/account",{brand:a,stripeToken:b}).get(0).get("account").then(fe).catch(this.Bb,this.yb)});function ge(a,b,c){a.l.get("/billing/brands/"+encodeURIComponent(b)+"/account",function(a,b){200!=a?c(a,null):c(a,fe(b))})}
function he(a,b){return new P(function(a,e){ge(this,b,function(b,g){xc(b)?a(g):e(b)})}.bind(a))}d.getSubscription=P.method(function(a){return B(this.l,a.brand?"/billing/brands/"+a.brand+"/subscription"+(null!=a.excludeStandard?"?excludeStandard\x3d"+(a.excludeStandard?"true":"false"):""):"/billing/subscriptions/"+a.id).get(0).then(ie)});d.sh=P.method(function(a){return A(this.l,a.brand?"/billing/brands/"+a.brand+"/subscription":"/billing/subscriptions/"+a.id,a).get(0).then(je).catch(this.Bb,this.yb)});
P.method(function(a){return A(this.l,"/billing/brands/"+a.brand+"/subscription?refund",a).get(0).then(ke).catch(this.Bb,this.yb)});P.method(function(a){return A(this.l,"/billing/campaign",a).spread(le)});P.method(function(a){return Ac(this.l,"/billing/campaign/"+encodeURIComponent(a)).spread()});P.method(function(a,b){return B(this.l,"/billing/coupon/"+encodeURIComponent(a)+"?validate\x3d"+encodeURIComponent(b)).spread(me)});
P.method(function(a){a="/billing/brands/"+encodeURIComponent(a.D())+"/invoices?"+Nb(a);return B(this.l,a).get(0).then(ne)});P.method(function(a){a="/billing/invoices/"+encodeURIComponent(a.o())+"?"+Nb(a);return B(this.l,a).get(0).then(oe)});P.method(function(a){a=a.D()?"/billing/brands/"+encodeURIComponent(a.D())+"/invoice?upcoming":"/billing/brand/invoice?upcoming";return B(this.l,a).get(0).then(pe).catch(this.Bb,this.yb)});
P.method(function(a){var b=a.D()?"/billing/brands/"+encodeURIComponent(a.D())+"/invoice?create":"/billing/brand/invoice?create";return A(this.l,b,a).get(0).then(qe)});P.method(function(a){return A(this.l,"/billing/invoices/"+encodeURIComponent(a.invoiceId)+"?pay",a).get(0).then(re).catch(this.Bb,this.yb)});function se(){}se.prototype.o=function(){return this.id};se.prototype.qa=function(){return this.user};se.prototype.qd=function(){return this.status};function te(){}function ue(a){a=x(te,a);a.licenses=a.licenses.map(ve);a.credits=a.credits.map(we);a.subscriptionCharges=a.subscriptionCharges.map(xe);return Object.freeze(a)}function ye(){}function we(a){a=x(ye,a);a.date=new Date(a.date);return Object.freeze(a)}ye.prototype.sd=function(){return this.value};ye.prototype.getDate=function(){return this.date};
function ze(){}function xe(a){a=x(ze,a);a.fromDate=new Date(a.fromDate);a.toDate=new Date(a.toDate);return Object.freeze(a)}ze.prototype.getSubscription=function(){return this.subscription};function Ae(){}Ae.prototype.getSubscription=function(){return this.subscription};function ie(a){a=x(Ae,a);a.subscription=Be(a.subscription);return a}function Ce(){}Ce.prototype.o=function(){return this.id};Ce.prototype.D=function(){return this.brand};Ce.prototype.qd=function(){return this.status};
function Be(a){a=x(Ce,a);a.plan=Object.freeze(x(F,a.plan));null!=a.trialEnd&&(a.trialEnd=new Date(a.trialEnd));null!=a.paidUntil&&(a.paidUntil=new Date(a.paidUntil));null!=a.periodEnd&&(a.periodEnd=new Date(a.periodEnd));return a}function F(){}F.prototype.o=function(){return this.id};F.prototype.aa=function(){return this.displayName};F.prototype.xb=function(){return this.trialPeriodDays};function G(a){return a.billingInterval}F.prototype.Pa=function(){return this.price};
function H(a){return("YEARLY"===G(a)?1:12)*a.Pa()}function De(){}De.prototype.Yd=function(a){this.brand=a;return this};function Ee(){}Ee.prototype.getSubscription=function(){return this.subscription};function je(a){a=x(Ee,a);a.subscription=Be(a.subscription);return a}function Fe(){}function ke(a){return Object.freeze(x(Fe,a))}function Ge(){}Ge.prototype.o=function(){return this.id};Ge.prototype.aa=function(){return this.displayName};Ge.prototype.rd=function(){return this.type};Ge.prototype.xb=function(){return this.trialPeriodDays};
function He(a){a=x(Ge,a);null!=a.created&&(a.created=new Date(a.created));null!=a.expiry&&(a.expiry=new Date(a.expiry));return a}function Ie(){}Ie.prototype.qa=function(){return this.user};Ie.prototype.D=function(){return this.brand};function Je(){}Je.prototype.qa=function(){return this.user};Je.prototype.D=function(){return this.brand};function Ke(){}function le(a){a=x(Ke,a);a.campaign=He(a.campaign);return a}function Le(){}
function me(a){a=x(Le,a);var b=x(Je,a.coupon);b.campaign=He(b.campaign);null!=b.dateRedeemed&&(b.dateRedeemed=new Date(b.dateRedeemed));if(null!=b.couponRedemption){var c=x(Ie,b.couponRedemption);c.dateRedeemed=new Date(c.dateRedeemed);b.couponRedemption=c}a.coupon=b;return a}function Me(a){a=void 0===a?{}:a;this.brand=a.j||"";this.last4=a.ai||"";this.expMonth=a.Mh||null;this.expYear=a.Nh||null}Me.prototype.D=function(){return this.brand};function Ne(){}
function Oe(a){a=x(Ne,a);a.card=Object.freeze(x(Me,a.card));a.addedDate&&(a.addedDate=new Date(a.addedDate));a.deletedDate&&(a.deletedDate=new Date(a.deletedDate));return Object.freeze(a)}Ne.prototype.oc=function(){return this.card};function Pe(a){a=void 0===a?{}:a;this.brand=a.j||"";this.stripe=a.fa||!1;this.stripeKey=a.li||null;this.credit=a.Ih||0;this.card=a.K||null;this.delinquent=a.Kh||!1;this.archivedCards=a.Ah||[]}
function fe(a){a=x(Pe,a);a.archivedCards&&(a.archivedCards=a.archivedCards.map(Oe));return Object.freeze(a)}Pe.prototype.D=function(){return this.brand};Pe.prototype.oc=function(){if(this.card)return Object.freeze(x(Me,this.card))};function I(a){a=void 0===a?{}:a;this.media=a.media||"";this.version=a.version||0;this.title=a.title||"";this.contributorName=a.Fh||null;this.thumbUrl=a.oi||null;this.price=a.hi||0;this.sessionCreationDate=a.ji||null;this.layout=a.bi||""}I.prototype.getVersion=function(){return this.version};
I.prototype.eb=function(){return this.title};I.prototype.Pa=function(){return this.price};function ve(a){return a?$.extend(new I,a):null}function Qe(){}function ne(a){return Object.freeze(x(Qe,a))}function Re(){}function oe(a){a=x(Re,a);a.invoice=Object.freeze(x(se,a.invoice));a.details&&(a.details=ue(a.details));return Object.freeze(a)}function Se(){}function pe(a){a=x(Se,a);a.invoice=Object.freeze(x(se,a.invoice));a.details=ue(a.details);return Object.freeze(a)}function Te(){}
function qe(a){a=x(Te,a);return Object.freeze(a)}function Ue(){}function re(a){a=x(Ue,a);return Object.freeze(a)}function Ve(){I.call(this)}Ve.prototype=Object.create(I.prototype);Ve.prototype.constructor=Ve;function We(){}We=Backbone.View.extend({className:"priceOptions",tagName:"ul"});d=We.prototype;d.initialize=function(a){this.Ua=a.Ua};d.events=function(){return{click:this.nf}};d.render=function(){this.$el.html(this.Ua.map(this.Ng).join(""));return this};d.nf=function(a){a=$(a.target).closest("li");Xe(this,a.index())};
function Xe(a,b){a.$(".priceOption--selected").removeClass("priceOption--selected");0<=b&&b<a.Ua.length&&(a.$("li").eq(b).addClass("priceOption--selected"),a.$("li").eq(b).find("input").prop("checked",!0),a.trigger("selectPlan",a.Ua[b].plan))}d.Md=function(){function a(a){switch(G(a)){case "MONTHLY":return a.Pa();case "YEARLY":return H(a);default:throw Error("unknown billing interval");}}var b=[].concat(this.Ua).sort(function(b,e){return a(b.plan)-a(e.plan)}),b=this.Ua.indexOf(b[0]);Xe(this,b)};
d.Ng=_.template('\x3cli class\x3d"priceOption"\x3e\x3cinput name\x3d"priceOptionPlan" type\x3d"radio"\x3e\x3cspan class\x3d"priceOptionTitle"\x3e\x3c%- title %\x3e\x3c/span\x3e\x3cspan class\x3d"priceOptionPricePerBillingInterval"\x3e\x3c%- pricePerIntervalText %\x3e\x3c/span\x3e\x3cspan class\x3d"priceOptionPricePerMonth"\x3e\x3c%- pricePerMonthText %\x3e\x3c/span\x3e\x3cspan class\x3d"priceOptionSummary"\x3e\x3c%- summaryText %\x3e\x3c/span\x3e\x3cspan class\x3d"priceOptionBillingCycle"\x3e\x3c%- billingCycleText %\x3e\x3c/span\x3e\x3c/li\x3e');function J(){}J=Backbone.View.extend({tagName:"ul",className:"textIconList"});J.prototype.initialize=function(a){this.items=a.items};J.prototype.render=function(){this.$el.html(this.items.map(this.Db).join(""));return this};J.prototype.Db=_.template('\x3cli class\x3d"textIconItem"\x3c% if (icon) { %\x3e data-icon\x3d"\x3c%- icon %\x3e"\x3c% } %\x3e\x3e\x3ch3\x3e\x3c%- title %\x3e\x3c/h3\x3e\x3c% if (isHtml) { %\x3e\x3c%\x3d content %\x3e\x3c% } else { %\x3e\x3cp\x3e\x3c%- content %\x3e\x3c/p\x3e\x3c% } %\x3e\x3c/li\x3e');
J.fe=function(a){return new J({items:[{title:Xa(a),content:a.format("canvaForWorkUpgradeTeamBrandKitsDescription"),icon:"teamBrandKits",isHtml:!1},{title:Ya(a),content:a.format("canvaForWorkUpgradeLayoutCreatorsDescription"),icon:"layoutCreators",isHtml:!1},{title:Za(a),content:a.format("canvaForWorkUpgradeMagicallyResizeDescription"),icon:"magicResize",isHtml:!1},{title:$a(a),content:a.format("canvaForWorkUpgradePhotoFoldersDescription"),icon:"photoFolders",isHtml:!1}]})};
J.Hh=function(a){return new J({items:[{title:Xa(a),content:a.format("canvaForWorkUpgradeTeamBrandKitsShortDescription"),icon:"teamBrandKits",isHtml:!1},{title:Za(a),content:a.format("canvaForWorkUpgradeMagicallyResizeShortDescription"),icon:"magicResize",isHtml:!1},{title:Ya(a),content:a.format("canvaForWorkUpgradeLayoutCreatorsShortDescription"),icon:"layoutCreators",isHtml:!1},{title:$a(a),content:a.format("canvaForWorkUpgradePhotoFoldersShortDescription"),icon:"photoFolders",isHtml:!1}]})};function Ye(){}Ye=Backbone.View.extend({className:"teamBillingSignup"});d=Ye.prototype;d.events=function(){return{"click .teamBillingCreditCardRevert":this.trigger.bind(this,"revert"),"click .teamBillingCreditCardSubmit":this.trigger.bind(this,"submit"),"click .teamBillingRetryButton":this.trigger.bind(this,"retry")}};
d.initialize=function(a){this.compact=a.compact;this.Sb=a.Sb;this.listenTo(this.Sb,"selectPlan",this.trigger.bind(this,"selectPlan"));this.Og=J.fe(Ca(a.u));this.O=a.O;this.u=a.u;this.Z=Ia(a.u);this.R=a.R};
d.render=function(){var a=moment().add(this.O,"days").format("MMMM Do, YYYY"),b;b=this.u;b.ha||(b.ha=new rb(b.ka));b=b.ha;this.R&&this.$el.addClass("teamBillingSignup--variant");this.$el.html(this.template({compact:this.compact,claimHtml:this.R?this.Z.$b(this.O):this.Z.mf(this.O),createTrialPeriodPoint1Html:this.R?b.format("teamUpgradeCreateTrialPeriodPoint1V"):b.ge(a),createTrialPeriodPoint2Html:this.R?b.format("teamUpgradeCreateTrialPeriodPoint2V",a):b.he(),createTrialPeriodPoint3Html:this.R?b.format("teamUpgradeCreateTrialPeriodPoint3V"):
b.ie(),encryption:this.Z.Bf(),itemsTitle:this.Z.Of(),revertCard:this.Z.Xg(),startTrial:this.Z.ih()}));this.compact||this.Og.render().$el.appendTo(this.$(".teamBillingPromoItems"));this.Sb.render().$el.appendTo(this.$(".teamBillingPriceOptions"));return this};d.Md=function(){this.Sb.Md()};function Ze(a,b){a.$(".teamBillingCreditCardSubmit").removeClass("buttonSpinner");alert(b)}d.nb=function(a){a=void 0===a?"":a;this.$(".teamBillingTotalText").html(a)};
function $e(a,b){a=a.$(".teamBillingCreditCardRevert");b?a.show():a.hide()}d.mb=function(a){this.$el.toggleClass("enabled",a)};d.template=_.template('\x3cdiv class\x3d"teamBillingOptionsContainer"\x3e\x3cdiv class\x3d"teamBillingOptions"\x3e\x3cdiv class\x3d"teamBillingInformation"\x3e\x3ch2\x3e\x3c%\x3d claimHtml %\x3e\x3c/h2\x3e\x3cul\x3e\x3cli\x3e\x3c%\x3d createTrialPeriodPoint1Html %\x3e\x3c/li\x3e\x3cli\x3e\x3c%\x3d createTrialPeriodPoint2Html %\x3e\x3c/li\x3e\x3cli\x3e\x3c%\x3d createTrialPeriodPoint3Html %\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3cdiv class\x3d"teamBillingPriceOptions"\x3e\x3c/div\x3e\x3cdiv class\x3d"teamBillingForm"\x3e\x3cdiv class\x3d"teamBillingCreditCardContainer"\x3e\x3cdiv class\x3d"teamBillingTotalText"\x3e\x3c/div\x3e\x3cbutton class\x3d"button buttonBlock teamBillingCreditCardSubmit"\x3e\x3cspan class\x3d"spinner"\x3e\x3c/span\x3e\x3c%- startTrial %\x3e\x3c/button\x3e\x3cbutton class\x3d"button buttonBlock buttonPlain teamBillingCreditCardRevert"\x3e\x3c%- revertCard %\x3e\x3c/button\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cp class\x3d"teamBillingSecurityMessage"\x3e\x3c%- encryption %\x3e\x3c/p\x3e\x3c/div\x3e\x3c% if (!compact) { %\x3e\x3cdiv class\x3d"teamBillingPromoItems"\x3e\x3ch4\x3e\x3c%- itemsTitle %\x3e\x3c/h4\x3e\x3c/div\x3e\x3c% } %\x3e');
d.Vg=_.template('\x3cp class\x3d"teamBillingRetry"\x3e\x3c%- billingError %\x3e\x3cbr/\x3e\x3cbutton class\x3d"button teamBillingRetryButton"\x3e\x3c%- tryAgain %\x3e\x3c/button\x3e\x3c/p\x3e');function af(a){this.analytics=a.analytics;this.Ia=a.Ia;this.Ga=a.Ga;this.j=a.j;this.Gb=null;this.He=!1;this.K=null;this.na=a.na;this.listenTo(this.na,{input:this.bg,requestSubmit:this.Le});this.lb=null;this.Ub=a.Ub;this.Tc=a.Tc||null;this.u=a.u;this.view=a.view;this.listenTo(this.view,{selectPlan:this.qh,retry:this.xg,revert:this.yg,submit:this.Le})}d=af.prototype;d.listenTo=Backbone.Events.listenTo;d.on=Backbone.Events.on;d.once=Backbone.Events.once;d.off=Backbone.Events.off;d.stopListening=Backbone.Events.stopListening;
d.trigger=Backbone.Events.trigger;function bf(a){var b=a.Rb.slice(0).sort(function(a,b){return H(b)-H(a)}),b=new We({Ua:cf(b,Ca(a.u),a.R)});return new Ye({compact:a.compact,Sb:b,u:a.u,O:a.O||0<a.Rb.length&&a.Rb[0].xb()||30,R:a.R})}d.appendTo=function(a){this.view.render().$el.appendTo(a);this.view.Md();$e(this.view,!1);this.na.render();this.na.getElement().prependTo(this.view.$(".teamBillingCreditCardContainer"))};d.remove=function(){this.stopListening();this.na.remove();this.view.remove()};
d.mb=function(a){this.view.mb(a)};function df(a){function b(a){return 404===a}var c=a.j.o();a.mb(!1);(function(){return a.Tc?P.resolve(a.Tc):he(a.Ia,c).catch(b,function(){return fe({})})})().bind(a).then(function(a){a.oc()&&(this.K=a.oc(),this.na.Ic(!0).Wa(this.K))}).catch(function(){var a=this.view;a.$el.html(a.Vg({billingError:a.Z.jf(),tryAgain:a.Z.oh()}))}).finally(function(){this.mb(!0)})}
function ef(a){var b=Cd().Yd(a.j.o());a.Ga.Kf(b).bind(a).then(function(a){this.Gb=a.getCount();this.nb()}).catch(function(){this.He=!0;this.nb()})}
d.nb=function(){la(null!=this.lb,"A plan must be selected");var a=Ia(this.u);if(this.He)a=this.view,a.$(".teamBillingTotalText").text(a.Z.format("teamBillingSignupTotalPriceError"));else if(null!==this.Gb)if(1===this.Gb)this.view.nb();else{var b=this.lb.Pa()*this.Gb;if("YEARLY"===G(this.lb))b=a.format("teamBillingSignupPerYear",b);else if("MONTHLY"===G(this.lb))b=a.format("teamBillingSignupPerMonth",b);else throw Error("unrecognised billing interval");a=a.format("teamBillingSignupTotalPrice",this.Gb,
b);this.view.nb(a)}};d.bg=function(a){this.K&&$e(this.view,a)};d.xg=function(){df(this)};d.yg=function(){this.K&&(this.na.Wa(this.K),$e(this.view,!1))};
d.Le=function(){this.mb(!1);this.view.$(".teamBillingCreditCardSubmit").toggleClass("buttonSpinner",!0);this.na.Lf().bind(this).then(function(){if(!this.Ub){var a=(new De).Yd(this.j.o()),b=this.lb.o();a.plan=b;return this.Ia.sh(a)}}).then(function(a){var b=this.analytics;b.ga&&b.ga("send","event",{eventCategory:"Subscription",eventAction:"Upgraded"});this.trigger("signup",a)}).catch(K,function(a){this.analytics.track("upgrade_onboarding_card_error",{message:a.message});a=ff(Ea(this.u),a);Ze(this.view,
a)}).catch(function(){Ze(this.view,"An error occured while trying to subscribe")}).finally(function(){this.mb(!0)});this.analytics.track("upgrade_onboarding_card_submit")};d.qh=function(a){this.lb=a;this.nb()};function L(){}L=Backbone.View.extend({className:"promotion"});L.prototype.initialize=function(a){this.Dc=a.Dc;this.Re=a.Re||"";this.Id=a.Id||"";this.ba=a.ba||""};L.prototype.events=function(){return{"click .promoActions button":this.trigger.bind(this,"next")}};L.prototype.render=function(){this.$el.html(this.template({promoHeaderHtml:this.Id,promoIntroHtml:this.Re,buttonText:this.ba}));this.Dc&&this.Dc.render().$el.appendTo(this.$(".promoContent"));return this};L.prototype.template=_.template('\x3c% if (promoHeaderHtml) { %\x3e\x3cdiv class\x3d"promoHeader"\x3e\x3c%\x3d promoHeaderHtml %\x3e\x3c/div\x3e\x3c% } %\x3e\x3cdiv class\x3d"promoBody"\x3e\x3c% if (promoIntroHtml) { %\x3e\x3cdiv class\x3d"promoIntro"\x3e\x3c%\x3d promoIntroHtml %\x3e\x3c/div\x3e\x3c% } %\x3e\x3cdiv class\x3d"promoContent"\x3e\x3c/div\x3e\x3c% if (buttonText) { %\x3e\x3cdiv class\x3d"promoActions"\x3e\x3cbutton class\x3d"button"\x3e\x3c%- buttonText %\x3e\x3c/button\x3e\x3c% } %\x3e\x3c/div\x3e');function gf(){}gf=Backbone.View.extend({className:"promotionVideo promotion"});gf.prototype.initialize=function(a){this.bf=a.bf;this.Qe=a.Qe||"";this.ba=a.ba||""};gf.prototype.events=function(){return{"click .promoActions button":this.trigger.bind(this,"next")}};gf.prototype.render=function(){this.$el.html(this.template({promoHeaderHtml:this.Qe,buttonText:this.ba,videoId:this.bf}));return this};gf.prototype.template=_.template('\x3c% if (promoHeaderHtml) { %\x3e\x3cdiv class\x3d"promoHeader"\x3e\x3c%\x3d promoHeaderHtml %\x3e\x3c/div\x3e\x3c% } %\x3e\x3cdiv class\x3d"promoBody"\x3e\x3cdiv class\x3d"promoContent"\x3e\x3ciframe class\x3d"promoVideo" type\x3d"text/html" width\x3d"650" height\x3d"369" src\x3d"https://www.youtube.com/embed/\x3c%- videoId %\x3e?autoplay\x3d1\x26modestbranding\x3d1\x26controls\x3d2\x26rel\x3d0\x26loop\x3d1" frameborder\x3d"0" allowfullscreen\x3d"false"/\x3e\x3c/div\x3e\x3c% if (buttonText) { %\x3e\x3cdiv class\x3d"promoActions"\x3e\x3cbutton class\x3d"button"\x3e\x3c%- buttonText %\x3e\x3c/button\x3e\x3c% } %\x3e\x3c/div\x3e');function M(){}M=Backbone.View.extend();M.prototype.initialize=function(a){a=_.defaults({},a,{ic:!0,content:$(),Jc:!0,Kc:!0});this.F=a.F;this.ic=!!a.ic;this.content=a.content;this.hb=new hf({style:this.Ae(),F:this.F});this.listenTo(this.hb,"maskClick",this.blur);this.result=1;this.Jc=!!a.Jc;this.Y=!!a.Y;this.Kc=!!a.Kc;this.title=a.Kc?a.title:""};M.ef=300;d=M.prototype;d.blur=function(){this.ic&&(this.result=0,this.remove())};d.cancel=function(){this.result=1;this.remove()};
d.fail=function(){this.result=3;this.remove()};d.events=function(){return{"click .close":this.Ke,"click .dialogMaskCloseButton":this.Ke,"click button.done":this.ok}};d.Ae=function(){return jf};d.ok=function(){this.result=2;this.remove()};d.Ke=function(a){a.preventDefault();this.cancel()};
d.remove=function(){var a=this;this.$el.children(".dialog").addClass("disappearing");this.hb.hide();this.trigger("hide",this.result);this.F.setTimeout(function(){a.trigger("remove",a);Backbone.View.prototype.remove.call(a)},M.ef);return this};d.render=function(){this.$el.html(this.template({showCloseButton:this.Jc,showDialogMaskCloseButton:this.Y,showTitle:this.Kc,title:this.title}));this.$(".content").append(this.content);this.$(".dialog").data("Canva_Views_Dialog",this);return this};
function kf(a,b){a.$("h2").text(b);a.title=b}d.show=function(){function a(e){e.target===e.currentTarget&&(b.off("animationend transitionend",a),c.trigger("showTransitionEnd",c))}var b,c=this;this.render();b=this.$el.children(".dialog");this.hb.show(this.$el);this.trigger("show",this);wa(function(){b.removeClass("preparing");b.on("animationend transitionend",a)});return this};d.template=_.template('\x3c% if (showDialogMaskCloseButton) { %\x3e\x3ca class\x3d"dialogMaskCloseButton"\x3eClose\x3c/a\x3e\x3c% } %\x3e\x3cdiv class\x3d"dialog preparing"\x3e\x3c% if (showTitle) { %\x3e\x3ch2\x3e\x3c%- title %\x3e\x3c/h2\x3e\x3c% } %\x3e\x3cdiv class\x3d"content"\x3e\x3c/div\x3e\x3c% if (showCloseButton) { %\x3e\x3ca class\x3d"close" href\x3d"#" title\x3d"Close this dialog"\x3eClose\x3c/a\x3e\x3c% } %\x3e\x3c/div\x3e');function hf(a){this.F=a.F;this.element=$(this.template());this.element.addClass(lf(a.style));this.element.on("click",".modalContentMask",function(a){this.trigger("maskClick",a)}.bind(this));this.style=a.style;this.cc=""}d=hf.prototype;d.off=Backbone.Events.off;d.on=Backbone.Events.on;d.trigger=Backbone.Events.trigger;
function lf(a){switch(a){case jf:return"modalContentBlurAndDarken";case mf:return"modalContentDarken";case nf:return"modalContentClear";case of:return"modalContentNone";default:throw Error();}}d.hide=function(){$("body").removeClass(this.cc).attr("data-modal-levels",$("body").attr("data-modal-levels")-1);"0"===$("body").attr("data-modal-levels")&&$("body").css("margin-right","");this.element.removeClass("modalContentOn");this.F.setTimeout(function(){this.element.detach()}.bind(this),300)};
d.show=function(a){this.element.children(":not(.modalContentMask)").remove();this.element.append(a).appendTo("body");wa(function(){var a=this,c=parseInt($("body").attr("data-modal-levels"),10)||0,e=window.innerWidth-$(window).width();$("body").attr("data-modal-levels",c+1);0===c&&$("body").css("margin-right",e);this.element.addClass("modalContentOn");["modalContentVisible",lf(this.style)+"Visible"].forEach(function(c){$("body").hasClass(c)||(a.cc+=c+" ")});$("body").addClass(this.cc)}.bind(this))};
d.template=_.template('\x3cdiv class\x3d"modalContent"\x3e\x3cdiv class\x3d"modalContentMask"\x3e\x3c/div\x3e\x3c/div\x3e');var jf="BLUR_AND_DARKEN",mf="DARKEN",nf="CLEAR",of="NONE";function pf(){}pf=Backbone.View.extend({className:"multipageDialog"});d=pf.prototype;d.initialize=function(a){this.F=u;this.jc=0;this.kd=a.kd||[];this.ca=void 0===a.ca||a.ca;this.Y=!!a.Y;this.hb=new hf({F:this.F,style:jf});this.Ta=a.Ta;this.Ta.forEach(function(a){this.listenTo(a,"next",this.fh);this.listenTo(a,"back",this.gh)},this)};d.events=function(){return{click:this.Zf,"click .dialogMaskCloseButton":this.hide}};
d.hide=function(){this.$el.addClass("multipageDialogDisappearing");this.hb.hide();this.F.setTimeout(function(){this.trigger("hide")}.bind(this),300)};d.Zf=function(a){$(a.target).is(".multipageDialogPage, .multipageDialogPageWrapper")&&this.ca&&this.hide()};
d.render=function(){var a=this;(function(){a.kd.forEach(function(b){a.$el.addClass(b)})})();(function(){a.Ta.forEach(function(a){a.$el.detach()});a.$el.empty()})();a.Y&&a.$el.append('\x3cbutton class\x3d"buttonLink dialogMaskCloseButton"\x3eClose\x3c/button\x3e');(function(){a.Ta.forEach(function(b){var c,e;c=$("\x3cdiv\x3e").addClass("multipageDialogPageWrapper");e=$("\x3cdiv\x3e").addClass("multipageDialogPage");c.append(e);e.append(b.render().$el);a.$el.append(c)})})();qf(this,this.jc);return this};
d.show=function(){this.$el.addClass("multipageDialogAppearing");this.hb.show(this.render().$el);this.F.setTimeout(function(){this.$el.removeClass("multipageDialogAppearing")}.bind(this),300)};d.fh=function(){var a=this.jc+1;a>=this.Ta.length?this.hide():qf(this,a)};d.gh=function(){var a=this.jc-1;0>a?this.hide():qf(this,a)};
function qf(a,b){a.trigger("pageChange",a.Ta[b]);var c=a.$(".multipageDialogPageWrapper"),e=a.$(".multipageDialogPage");a.jc=b;c.css("transform","translateY("+-100*b+"%)");e.removeClass("multipageDialogCurrentPage");e.eq(b).addClass("multipageDialogCurrentPage")};function rf(a){this.Xa=a.Xa;this.pa=null;this.O=a.O||0;this.ca=void 0===a.ca||a.ca;this.$a=void 0===a.$a||a.$a;this.Y=void 0===a.Y||a.Y;this.analytics=a.analytics;this.Cf=_.once(function(){df(a.Xa);ef(a.Xa)});this.Xa.once("signup",this.Cg.bind(this));this.Ha=a.lf;this.R=a.R}d=rf.prototype;d.listenTo=Backbone.Events.listenTo;d.listenToOnce=Backbone.Events.listenToOnce;d.on=Backbone.Events.on;d.once=Backbone.Events.once;d.off=Backbone.Events.off;d.stopListening=Backbone.Events.stopListening;
d.trigger=Backbone.Events.trigger;d.remove=function(){this.pa&&this.pa.remove()};d.show=function(){sf(this,[])};function Rc(a){var b=[],c=a.Ha,e=_.template("\x3ch2\x3e\x3c%- title %\x3e\x3c/h2\x3e\x3cp\x3e\x3c%- subtitle %\x3e\x3c/p\x3e");b.push(new L({ba:tf(a),Id:e({title:c.format("canvaForWorkUpgradeWelcomeTitle"),subtitle:c.format("canvaForWorkUpgradeWelcomeSubTitle")}),Dc:J.fe(c)}));sf(a,b)}
function sf(a,b){var c=new Backbone.View({className:"upgradeDialogSignup"});b.push(c);a.pa=new pf({kd:["upgradeDialog"],ca:a.ca,Y:a.Y,Ta:b});a.pa.on("hide",function(){a.pa.remove();a.pa=null;a.Xa.remove();a.trigger("hide")});a.Cf();a.pa.show();a.analytics&&a.analytics.track("upgrade_dialog_loaded");a.Xa.appendTo(c.$el);c.$el.append(a.Pg({meganKelleyQuote:a.Ha.format("canvaForWorkUpgradeQuoteMeganKelleyContent"),meganKelleyCite:a.Ha.format("canvaForWorkUpgradeQuoteMeganKelleyCite"),donnaMoritzQuote:a.Ha.format("canvaForWorkUpgradeQuoteDonnaMoritzContent"),
donnaMoritzCite:a.Ha.format("canvaForWorkUpgradeQuoteDonnaMoritzCite"),travisBernardQuote:a.Ha.format("canvaForWorkUpgradeQuoteTravisBernardContent"),travisBernardCite:a.Ha.format("canvaForWorkUpgradeQuoteTravisBernardCite")}))}function tf(a){var b=a.Ha;return 0===a.O?b.format("canvaForWorkUpgradeGetCanvaForWork"):b.format("canvaForWorkUpgradeStartYourTrial",a.O)}d.Cg=function(){this.$a&&this.pa&&this.pa.remove();this.trigger("signup")};d.Pg=_.template('\x3cdiv class\x3d"upgradeDialogQuotes"\x3e\x3cblockquote\x3e\x3c%- meganKelleyQuote %\x3e\x3ccite\x3e\x3c%- meganKelleyCite %\x3e\x3c/cite\x3e\x3c/blockquote\x3e\x3cblockquote\x3e\x3c%- donnaMoritzQuote %\x3e\x3ccite\x3e\x3c%- donnaMoritzCite %\x3e\x3c/cite\x3e\x3c/blockquote\x3e\x3cblockquote\x3e\x3c%- travisBernardQuote %\x3e\x3ccite\x3e\x3c%- travisBernardCite %\x3e\x3c/cite\x3e\x3c/blockquote\x3e\x3c/div\x3e');
_.template('\x3cdiv class\x3d"upgradeDialogSpecific"\x3e\x3cdiv class\x3d"upgradeDialogSpecific__image upgradeDialogSpecific__image--\x3c%- splashImageClass %\x3e"\x3e\x3c/div\x3e\x3ch2 class\x3d"upgradeDialogSpecific__primaryText"\x3e\x3c%- primaryText %\x3e\x3c/h1\x3e\x3cp class\x3d"upgradeDialogSpecific__secondaryHtml"\x3e\x3c%\x3d secondaryHtml %\x3e\x3c/p\x3e\x3c/div\x3e');var uf={LEFT:"left",uh:"leftTop",wh:"top",xh:"topLeft",vh:"rightTop"};function Q(){}Q=M.extend();d=Q.prototype;d.initialize=function(a){M.prototype.initialize.call(this,_.extend({F:u},a));this.pe=a.pe||"Done";this.Nd=void 0!==a.Nd?a.Nd:!0;this.rb=null;this.Oe=a.position instanceof Array?a.position:[a.position||"top"];this.position=null;this.ea=_.defaults({},a.ea,{left:0,top:0});this.zc=a.zc||!1;this.on("hide",this.le);this.keydown=this.keydown.bind(this)};
function vf(a){$(document).on("keydown",a.keydown)}d.Qg=function(){$(document).off("keydown",this.keydown)};d.Ae=function(){return mf};d.getCurrentPosition=function(){return this.position};
d.render=function(){M.prototype.render.call(this);this.$(".dialog").addClass("popover").addClass(this.zc?"paddingLess":"").prepend('\x3cdiv class\x3d"pointer"\x3e\x3c/div\x3e');this.Nd&&this.$(".content").append('\x3cp class\x3d"buttonContainer"\x3e\x3cbutton class\x3d"button buttonBlock done"\x3e'+this.pe+"\x3c/button\x3e\x3c/p\x3e");return this};
function Nc(a,b){if(!a.rb){var c=_.debounce(a.Zb.bind(a),300);window.addEventListener("resize",c,!1);a.on("remove",function(){window.removeEventListener("resize",c,!1)})}a.show();vf(a);a.on("remove",a.Qg);wf(a,b);a.Zb()}function zf(){this.Gd=this.Fd=this.dialogLeft=this.dialogTop=null}
d.Zb=function(){for(var a,b,c=0;c<this.Oe.length;c++){a=b=this.Oe[c];var e=this.zc?7:19,f=this.zc?20:40,g=this.rb,k=g.offset(),n=k.top-$(document).scrollTop(),q=g.outerWidth(),m=g.outerHeight(),p=this.$(".dialog").outerHeight(),v=this.$(".dialog").outerWidth(),z=this.$el.width(),g=new zf,N=Math.round(k.left+q/2-v/2);switch(a){case "top":g.dialogLeft=N+v+10>z?z-v-10:N;g.dialogLeft+=this.ea.left;g.dialogTop=Math.round(n)+m+e+this.ea.top;a=N-g.dialogLeft;g.Fd="calc(50% - 8.5px + "+a+"px)";break;case "topLeft":g.dialogLeft=
k.left+v+10>z?z-v-10:k.left;g.dialogLeft+=this.ea.left;g.dialogTop=Math.round(n)+m+e+this.ea.top;g.Fd=g.dialogLeft+e;break;case "left":g.dialogLeft=k.left+q+this.ea.left;g.dialogTop=n-p/2+e+this.ea.top;break;case "leftTop":g.dialogLeft=k.left+q+this.ea.left+e;g.dialogTop=n+m/2-f+this.ea.top;10>g.dialogTop&&(g.Gd=g.dialogTop-10,g.dialogTop=10);break;case "rightTop":g.dialogLeft=k.left-v+this.ea.left-e,g.dialogTop=n+m/2-f+this.ea.top,10>g.dialogTop&&(g.Gd=g.dialogTop-10,g.dialogTop=10)}e=a=g;f=this.$(".dialog");
if(!(e.dialogLeft+f.outerWidth()>$(window).width()||e.dialogTop+f.outerHeight()>$(window).height()))break}this.position=b;this.$(".dialog").css("top",a.dialogTop).css("left",a.dialogLeft);c=this.$(".pointer");c.removeClass(_.values(uf).join(" ")).addClass(b);c.css("left",a.Fd||"");c.css("margin-top",a.Gd||"");return this};function wf(a,b){a.le();a.rb=b;b.addClass("on");b.blur()}d.le=function(){this.rb&&this.rb.removeClass("on")};
d.keydown=function(a){27===a.which&&(this.cancel(),a.stopPropagation(),a.preventDefault())};function Af(){}Af=Q.extend({className:"notificationsPopover"});d=Af.prototype;d.events=function(){return{"click .button.retry":this.ag}};d.initialize=function(a){Q.prototype.initialize.call(this,a);this.ed=a.ed;this.G=a.G};d.render=function(){Q.prototype.render.call(this);this.$("h2, .buttonContainer").remove();this.$(".content").append(this.Pf());return this};function Jc(a){Ic(a).removeClass("loading");a.$(".loading.message").remove()}
function Kc(a,b,c,e){function f(a){var b=moment(a);return 0<moment().diff(a,"years")?b.format("[on] MMM D, YYYY"):b.format("[on] MMM D")}function g(a){return a.timestamp>c}function k(a){return Bf(n,a,!g(a))}var n=a,q=b.filter(g).length,m=Ic(a);a.$el.toggleClass("loading",e);0<b.length?(m.html(b.map(k).join("")),m.find(".autoformat.date").each(function(){var a=$(this).data("timestamp");$(this).text(f(a))})):e||m.html(a.zf({emptyListMessage:a.G.xf(),emptyListQuip:a.G.yf(),emptyListButtonLabel:a.G.wf()}));
e&&(0===q?0===b.length?m.before(a.If({loading:a.G.wd()})):m.before(a.Hf({loadingNewer:a.G.Qf()})):m.after(a.Jf({loadingOlder:a.G.Rf()})));Cf(a)}d.Zb=function(){Q.prototype.Zb.call(this);Cf(this);return this};d.ag=function(){this.trigger("retry")};function Cf(a){var b=$(window).height(),c=parseInt(a.$(".dialog.popover").css("top"),10),b=Math.max(50,b-c-30);Ic(a).css("max-height",b)}
function Bf(a,b,c){function e(a,b){return g(a.aa()||a.Qa(),b)}function f(a){var b;var c=a.eb()||k.G.Yb(),c=c.trim();"undefined"==typeof b&&(b="");if(60>=c.length)b=c;else{a=c.substr(0,60);var c=c.substr(60).match(/^\S+/),e=a.match(/\S+$/);a.match(/\s$/)||null===c||(10>=c[0].length?a+=c[0]:10>=e[0].length&&(a=a.substr(0,60-e[0].length)));b=a=a.trim()+b}return g(b,!0)}function g(a,b){return k.Hg({name:a,type:b?"object":"subject"})}var k=a,n=l(b.Qd.i),q,m;switch(b.action){case "COMMENT":m=l(b.object.document);
q=tc(m.o(),"view");m=jb(a.G,e(n),f(m));break;case "FOLLOW":m=l(b.object.i);m.o()===a.ed?(q="/"+encodeURIComponent(n.Qa()),m=lb(a.G,e(n))):(q="/"+encodeURIComponent(m.Qa()),m=kb(a.G,e(n),e(m,!0)));break;case "LIKE":m=l(b.object.document);q=tc(m.o(),"view");m=a.G.Ee(e(n),f(m));break;case "PUBLICIFY":m=l(b.object.document);q=tc(m.o(),"view");m=mb(a.G,e(n),f(m));break;default:throw Error("Unknown ActivityVerb: "+b.action);}return a.Db({actorAvatarUrl:n.xe(50),content:m,readState:c?"read":"unread",timestamp:b.timestamp,
url:q})}function Ic(a){return a.$(".notifications")}d.Db=_.template('\x3cli class\x3d"notification \x3c%- data.readState %\x3e"\x3e\x3ca href\x3d"\x3c%- data.url %\x3e"\x3e\x3cimg src\x3d"\x3c%- data.actorAvatarUrl %\x3e" class\x3d"avatar"\x3e \x3c%\x3d data.content %\x3e \x3cspan class\x3d"autoformat date" data-timestamp\x3d"\x3c%- data.timestamp %\x3e"\x3e\x3c/span\x3e\x3c/a\x3e\x3c/li\x3e',{variable:"data"});
d.Hg=_.template('\x3cspan class\x3d"\x3c%- data.type %\x3e"\x3e\x3c%- data.name %\x3e\x3c/span\x3e',{variable:"data"});d.zf=_.template('\x3cli class\x3d"notification empty message"\x3e\x3c%- data.emptyListMessage %\x3e\x3cbr\x3e\x3cspan class\x3d"aside"\x3e\x3c%- data.emptyListQuip %\x3e\x3c/span\x3e\x3cbr\x3e\x3cbutton class\x3d"button retry"\x3e\x3c%- data.emptyListButtonLabel %\x3e\x3c/button\x3e\x3c/li\x3e',{variable:"data"});
d.Ef=_.template('\x3cdiv class\x3d"notification error message"\x3e\x3c%- data.errorMessage %\x3e\x3cbr\x3e\x3cbutton class\x3d"button retry"\x3e\x3c%- data.retryAfterErrorButtonLabel %\x3e\x3c/button\x3e\x3c/div\x3e',{variable:"data"});d.If=_.template('\x3cdiv class\x3d"notification loading message"\x3e\x3c%- data.loading %\x3e\x3c/div\x3e',{variable:"data"});d.Jf=_.template('\x3cdiv class\x3d"notification loading message"\x3e\x3c%- data.loadingOlder %\x3e\x3c/div\x3e',{variable:"data"});
d.Hf=_.template('\x3cdiv class\x3d"notification loading message"\x3e\x3c%- data.loadingNewer %\x3e\x3c/div\x3e',{variable:"data"});d.Pf=_.template('\x3col class\x3d"notifications"\x3e\x3c/ol\x3e');function K(a){Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor);this.message=a}K.prototype=Object.create(Error.prototype);K.prototype.constructor=K;
function ee(a){switch(a){case "card_declined":return new Df;case "expired_card":return new Ef;case "incorrect_cvc":return new Ff;case "incorrect_number":return new Gf;case "invalid_cvc":return new R;case "invalid_expiry_month":return new S;case "invalid_expiry_year":return new T;case "invalid_number":return new U;case "missing":return new Hf;case "processing_error":return new If;default:return new Jf(a)}}
function ff(a,b){if(b instanceof Df)return a.format("creditCardDeclined");if(b instanceof Ef)return a.format("creditCardExpired");if(b instanceof Ff)return a.format("creditCardCvcIncorrect");if(b instanceof Gf)return a.format("creditCardNumberIncorrect");if(b instanceof R)return a.format("creditCardCvcIncorrect");if(b instanceof S)return a.format("creditCardExpiryMonthIncorrect");if(b instanceof T)return a.format("creditCardExpiryYearIncorrect");if(b instanceof U)return a.format("creditCardNumberIncorrect");
if(b instanceof Hf)return a.format("creditCardMissingButRequired");if(b instanceof If)return a.format("creditCardProcessingError");if(b instanceof Jf)return a.format("creditCardUnknownProcessingError",b.errorCode);if(b instanceof Kf)return a.format("creditCardNoCardEntered");throw Error("unrecognized CreditCardError");}function Df(){K.call(this,"credit card declined")}Df.prototype=Object.create(K.prototype);Df.prototype.constructor=Df;function Ef(){K.call(this,"credit card expired")}
Ef.prototype=Object.create(K.prototype);Ef.prototype.constructor=Ef;function Ff(){K.call(this,"credit card cvc incorrect")}Ff.prototype=Object.create(K.prototype);Ff.prototype.constructor=Ff;function Gf(){K.call(this,"credit card number incorrect")}Gf.prototype=Object.create(K.prototype);Gf.prototype.constructor=Gf;function R(){K.call(this,"credit card cvc invalid")}R.prototype=Object.create(K.prototype);R.prototype.constructor=R;function S(){K.call(this,"credit card expiry month invalid")}
S.prototype=Object.create(K.prototype);S.prototype.constructor=S;function T(){K.call(this,"credit card expiry year invalid")}T.prototype=Object.create(K.prototype);T.prototype.constructor=T;function U(){K.call(this,"credit card number invalid")}U.prototype=Object.create(K.prototype);U.prototype.constructor=U;function Hf(){K.call(this,"credit card missing but required")}Hf.prototype=Object.create(K.prototype);Hf.prototype.constructor=Hf;function If(){K.call(this,"credit card processing error")}
If.prototype=Object.create(K.prototype);If.prototype.constructor=If;function Jf(a){K.call(this,"unknown credit card processing error "+a);this.errorCode=a}Jf.prototype=Object.create(K.prototype);Jf.prototype.constructor=Jf;function Kf(){K.call(this,"no credit card entered")}Kf.prototype=Object.create(K.prototype);Kf.prototype.constructor=Kf;function Lf(){var a=window.stripeConfig;switch(a.impl){case "local":return new Mf;case "stripe":return new Nf(a.publishableKey,window.Stripe||null);default:throw Error('unexpected stripe impl "'+a.impl+'"');}}function Mf(){}Mf.prototype.createToken=P.method(function(a){return JSON.stringify({brand:"Visa",expMonth:a.ve,expYear:a.we,last4:a.Sa.slice(-4)})});function Nf(a,b){(this.fa=b)&&this.fa.setPublishableKey(a)}
Nf.prototype.createToken=function(a){return new P(function(b,c){if(!this.fa)throw Error("Stripe API is unavailable");a={cvc:a.Oa,exp_month:a.ve,exp_year:a.we,number:a.Sa};this.fa.createToken(a,function(a,f){if(f.error){var g;try{g=f.error.code||""}catch(k){g=""}c(ee(g))}else b(f.id)})}.bind(this))};function Of(a){this.sb=a.sb;this.j=a.j;this.K=a.K;this.ab=a.ab;this.element=$('\x3cdiv class\x3d"creditCardEditor"\x3e');this.fa=a.fa;this.view=a.view;this.listenTo(this.view,"input",this.Lb);this.listenTo(this.view,"requestSubmit",function(){this.trigger("requestSubmit")})}d=Of.prototype;d.listenTo=Backbone.Events.listenTo;d.off=Backbone.Events.off;d.on=Backbone.Events.on;d.once=Backbone.Events.once;d.stopListening=Backbone.Events.stopListening;d.trigger=Backbone.Events.trigger;
d.render=function(){this.view.render().$el.appendTo(this.element);this.Ic(this.ab);this.K&&this.Wa(this.K);return this};d.getElement=function(){return this.element};d.remove=function(){this.stopListening();this.view.remove()};d.Wa=function(a){this.K=a;this.view.Wa(a);return this};d.Ic=function(a){this.ab=a;this.view.Ic(a);return this};d.Lf=P.method(function(a){function b(a){return a.oc()}return!this.K||this.view.kc||a?(a=Pf(this.view),Qf(a),this.ph(a).then(b).tap(this.Wa.bind(this))):this.K});
d.Lb=function(){this.K&&!Pf(this.view)&&this.Wa(this.K);this.trigger("input",this.view.kc)};d.ph=P.method(function(a){var b=this;return this.fa.createToken({Oa:a.Oa,ve:a.lc,we:a.mc,Sa:a.Sa}).then(function(a){return b.sb.rf(b.j,a)})});
function Qf(a){if(!a)throw new Kf;if(!(a.Oa&&3<=a.Oa.length&&4>=a.Oa.length))throw new R;if(!function(){var b=a.lc&&parseInt(a.lc,10);return b&&1<=b&&12>=b}())throw new S;if(!a.mc||!parseInt(a.mc,10))throw new T;if(!function(){var b=a.Sa&&a.Sa.replace(/[\s-]+/g,"");return b&&13<=b.length&&19>=b.length}())throw new U;};function Rf(a){a=a||{};soy.asserts.assertType(null==a.attributes||a.attributes instanceof soydata.SanitizedHtmlAttribute||a.attributes instanceof soydata.UnsanitizedText||goog.isString(a.attributes),"attributes",a.attributes,"?soydata.SanitizedHtmlAttribute|string|undefined");soy.asserts.assertType(null==a.block||goog.isBoolean(a.block)||1===a.block||0===a.block,"block",a.block,"boolean|null|undefined");soy.asserts.assertType(null==a.xa||a.xa instanceof goog.soy.data.SanitizedContent||goog.isString(a.xa),
"classes",a.xa,"null|string|undefined");soy.asserts.assertType(null==a.disabled||goog.isBoolean(a.disabled)||1===a.disabled||0===a.disabled,"disabled",a.disabled,"boolean|null|undefined");soy.asserts.assertType(null==a.id||a.id instanceof goog.soy.data.SanitizedContent||goog.isString(a.id),"id",a.id,"null|string|undefined");soy.asserts.assertType(null==a.name||a.name instanceof goog.soy.data.SanitizedContent||goog.isString(a.name),"name",a.name,"null|string|undefined");soy.asserts.assertType(null==
a.placeholder||a.placeholder instanceof goog.soy.data.SanitizedContent||goog.isString(a.placeholder),"placeholder",a.placeholder,"null|string|undefined");soy.asserts.assertType(null==a.tagName||a.tagName instanceof goog.soy.data.SanitizedContent||goog.isString(a.tagName),"tagName",a.tagName,"null|string|undefined");var b=a.tagName;soy.asserts.assertType(null==a.type||a.type instanceof goog.soy.data.SanitizedContent||goog.isString(a.type),"type",a.type,"null|string|undefined");soy.asserts.assertType(null==
a.small||goog.isBoolean(a.small)||1===a.small||0===a.small,"small",a.small,"boolean|null|undefined");soy.asserts.assertType(null==a.value||a.value instanceof goog.soy.data.SanitizedContent||goog.isString(a.value),"value",a.value,"null|string|undefined");var c=a.value,b=null==b?"input":b;a=""+("textarea"==b?"\x3ctextarea "+Sf(a)+"\x3e"+(c?soy.$$escapeHtmlRcdata(c):"")+"\x3c/textarea\x3e":"\x3c"+soy.$$filterHtmlElementName(b)+" "+Sf(a)+"\x3e");return soydata.VERY_UNSAFE.ordainSanitizedHtml(a)}
function Sf(a){a=a||{};soy.asserts.assertType(null==a.attributes||a.attributes instanceof soydata.SanitizedHtmlAttribute||a.attributes instanceof soydata.UnsanitizedText||goog.isString(a.attributes),"attributes",a.attributes,"?soydata.SanitizedHtmlAttribute|string|undefined");var b=a.attributes;soy.asserts.assertType(null==a.block||goog.isBoolean(a.block)||1===a.block||0===a.block,"block",a.block,"boolean|null|undefined");var c=a.block;soy.asserts.assertType(null==a.xa||a.xa instanceof goog.soy.data.SanitizedContent||
goog.isString(a.xa),"classes",a.xa,"null|string|undefined");var e=a.xa;soy.asserts.assertType(null==a.disabled||goog.isBoolean(a.disabled)||1===a.disabled||0===a.disabled,"disabled",a.disabled,"boolean|null|undefined");var f=a.disabled;soy.asserts.assertType(null==a.id||a.id instanceof goog.soy.data.SanitizedContent||goog.isString(a.id),"id",a.id,"null|string|undefined");var g=a.id;soy.asserts.assertType(null==a.name||a.name instanceof goog.soy.data.SanitizedContent||goog.isString(a.name),"name",
a.name,"null|string|undefined");var k=a.name;soy.asserts.assertType(null==a.placeholder||a.placeholder instanceof goog.soy.data.SanitizedContent||goog.isString(a.placeholder),"placeholder",a.placeholder,"null|string|undefined");var n=a.placeholder;soy.asserts.assertType(null==a.tagName||a.tagName instanceof goog.soy.data.SanitizedContent||goog.isString(a.tagName),"tagName",a.tagName,"null|string|undefined");var q=a.tagName;soy.asserts.assertType(null==a.type||a.type instanceof goog.soy.data.SanitizedContent||
goog.isString(a.type),"type",a.type,"null|string|undefined");var m=a.type;soy.asserts.assertType(null==a.small||goog.isBoolean(a.small)||1===a.small||0===a.small,"small",a.small,"boolean|null|undefined");var p=a.small;soy.asserts.assertType(null==a.value||a.value instanceof goog.soy.data.SanitizedContent||goog.isString(a.value),"value",a.value,"null|string|undefined");a=a.value;return soydata.VERY_UNSAFE.ordainSanitizedHtmlAttribute((b?" "+soy.$$filterHtmlAttributes(b):"")+' class\x3d"textInput'+
(c?" textInputBlock":"")+(e?" "+soy.$$escapeHtmlAttribute(e):"")+(p?" textInputSmall":"")+'"'+(f?" disabled":"")+(g?' id\x3d"'+soy.$$escapeHtmlAttribute(g)+'"':"")+(k?' name\x3d"'+soy.$$escapeHtmlAttribute(k)+'"':"")+(n?' placeholder\x3d"'+soy.$$escapeHtmlAttribute(n)+'"':"")+("textarea"!=q?' type\x3d"'+soy.$$escapeHtmlAttribute(null==m?"text":m)+'"'+(a?' value\x3d"'+soy.$$escapeHtmlAttribute(a)+'"':""):""))};function Tf(a){Backbone.View.call(this,{className:"creditCardEditView"});this.kc=!1;this.N=a.N;this.gc=a.gc}ha(Tf,Backbone.View);d=Tf.prototype;d.events=function(){return{"input #ccNumber":this.Yf,"keydown #expMonth":this.sg,"input #expMonth":this.rg,input:this.Lb,"keydown input":this.pg,"focus input:not([readonly])":this.cg,"blur input":this.Uf}};
function Pf(a){a={Oa:a.$("#cvc").val().trim(),lc:a.$("#expMonth").val().trim(),mc:a.$("#expYear").val().trim(),Sa:a.$("#ccNumber").val().trim()};return a.Oa.length||a.lc.length||a.mc.length||a.Sa.length?a:null}d.Wa=function(a){this.$el.addClass("prefilled");this.$("#ccNumber").val("").attr("placeholder",""+a.last4);this.$("#expMonth").val("").attr("placeholder","");this.$("#expYear").val("").attr("placeholder","");this.$("#cvc").val("").attr("placeholder","");this.kc=!1};
d.Ic=function(a){this.$("input").prop("readonly",!a);Uf(this)};
d.render=function(){var a;a=this.N.ee();var b=this.N.Ie(),c=this.N.cf(),e=this.N.ke();soy.asserts.assertType(goog.isString(a)||a instanceof goog.soy.data.SanitizedContent,"cardNumberPlaceholder",a,"string|goog.soy.data.SanitizedContent");soy.asserts.assertType(goog.isString(b)||b instanceof goog.soy.data.SanitizedContent,"monthPlaceholder",b,"string|goog.soy.data.SanitizedContent");soy.asserts.assertType(goog.isString(c)||c instanceof goog.soy.data.SanitizedContent,"yearPlaceholder",c,"string|goog.soy.data.SanitizedContent");
soy.asserts.assertType(goog.isString(e)||e instanceof goog.soy.data.SanitizedContent,"cvcPlaceholder",e,"string|goog.soy.data.SanitizedContent");a=soydata.VERY_UNSAFE.ordainSanitizedHtml(Rf({id:"ccNumber",name:"ccNumber",type:"text",placeholder:a,attributes:soydata.VERY_UNSAFE.$$ordainSanitizedAttributesForInternalBlocks('pattern\x3d"[0-9]{4}([ -]+[0-9]{1,4}){3,5} ?" maxlength\x3d"23" autocomplete\x3d"cc-number" required')})+"\x3cspan class\x3d'creditCardExpiry'\x3e"+Rf({id:"expMonth",name:"expMonth",
type:"text",placeholder:b,attributes:soydata.VERY_UNSAFE.$$ordainSanitizedAttributesForInternalBlocks('pattern\x3d"[01]?[0-9]" maxlength\x3d"2" autocomplete\x3d"cc-exp-month" required')})+Rf({id:"expYear",name:"expYear",type:"text",placeholder:c,attributes:soydata.VERY_UNSAFE.$$ordainSanitizedAttributesForInternalBlocks('pattern\x3d"[0-3][0-9]" maxlength\x3d"2" autocomplete\x3d"cc-exp-year" required')})+"\x3c/span\x3e"+Rf({id:"cvc",name:"cvc",type:"text",placeholder:e,attributes:soydata.VERY_UNSAFE.$$ordainSanitizedAttributesForInternalBlocks('pattern\x3d"[0-9]{3,4}" maxlength\x3d"4" autocomplete\x3d"cc-csc" required')}));
this.$el.html(a.toString());Uf(this);return this};function Uf(a){var b=0===a.$("input").filter(function(){return this.readOnly}).length,c=a.$("#ccNumber");a.gc&&b?c.prop("autofocus",!0):c.removeAttr("autofocus")}
d.Lb=function(a){a=$(a.target);var b=a.data("oldValue"),c=a.val();b!==c?(a.data("oldValue",c),a=!0):a=!1;a&&(this.$el.hasClass("prefilled")&&(this.$("#ccNumber").attr("placeholder",this.N.ee()),this.$("#expMonth").attr("placeholder",this.N.Ie()),this.$("#expYear").attr("placeholder",this.N.cf()),this.$("#cvc").attr("placeholder",this.N.ke())),this.$el.removeClass("prefilled"),this.kc=!0,this.trigger("input"))};d.pg=function(a){13===a.keyCode&&(this.trigger("requestSubmit"),a.preventDefault())};
d.cg=function(){this.$el.addClass("focused")};d.Uf=function(){this.$el.removeClass("focused")};d.Yf=function(a){if("IE"!=UAParser().browser.name){a=a.target;var b=a.selectionEnd,c=a.value.length;a.value=a.value.replace(/[^\d]/g,"").replace(/(.{4})/g,"$1 ").trim();var e=c!==a.value.length,c=" "===a.value.charAt(c-1);a.selectionEnd=b+(" "===a.value.charAt(b-1)&&c&&e?1:0)}};
d.sg=function(a){var b=this.$("#expMonth"),c=b.val(),e=this.$("#expYear"),f=String.fromCharCode(a.which);""===c&&f.match(/[2-9]/)?(a.preventDefault(),b.val("0"+f),e.focus()):-1<[191,32,9].indexOf(a.which)&&(a.preventDefault(),1===c.length&&b.val("0"+c),e.focus())};d.rg=function(){2===this.$("#expMonth").val().length&&this.$("#expYear").focus()};function V(){this.r=255;this.g=0;this.b=255;this.h=300;this.s=100;this.ac=50}function Vf(a,b,c,e){a.h=b;a.s=c;a.ac=e;var f;f=b/60;c/=100;e/=100;b=Math.floor(f);var g=f-b;f=e*(1-c);var k=e*(1-g*c);c=e*(1-(1-g)*c);b%=6;e=[Math.round(255*[e,k,f,f,c,e][b]),Math.round(255*[c,e,e,k,f,f][b]),Math.round(255*[f,f,c,e,e,k][b])];a.r=e[0];a.g=e[1];a.b=e[2];return a}d=V.prototype;d.sd=function(){return this.ac};
function Wf(a,b,c,e){a.r=b;a.g=c;a.b=e;var f;b=a.r;c=a.g;e=a.b;b/=255;c/=255;e/=255;var g=Math.max(b,c,e),k=Math.min(b,c,e);if(g==k)f=k=0;else{var n=g-k,k=n/g;switch(g){case b:f=(c-e)/n+(c<e?6:0);break;case c:f=(e-b)/n+2;break;case e:f=(b-c)/n+4}f/=6}f=[360*f,100*k,100*g];a.h=f[0];a.s=f[1];a.ac=f[2];return a}
function Xf(a){var b=new V;if(!/^#?[0-9a-f]{1,6}$/i.test(a))throw new SyntaxError('Invalid hexadecimal color: "'+a+'"');"#"==a.charAt(0)&&(a=a.slice(1));var c=Math.ceil(a.length/3);return Wf(b,Yf(a,0*c,c),Yf(a,1*c,c),Yf(a,2*c,c))}d.Wb=function(){return"#"+(256+this.r).toString(16).slice(-2)+(256+this.g).toString(16).slice(-2)+(256+this.b).toString(16).slice(-2)};d.clone=function(){var a=new V;a.r=this.r;a.g=this.g;a.b=this.b;a.h=this.h;a.s=this.s;a.ac=this.ac;return a};
d.distanceTo=function(a){var b=(this.r+a.r)/2,c=this.r-a.r,e=this.g-a.g;a=this.b-a.b;return(512+b)*c*c/256+4*e*e+(767-b)*a*a/256};function Zf(a){return Vf(new V,a.h,a.s,100)}d.equals=function(a){return null!=a&&a.serialize()===this.serialize()};d.serialize=V.prototype.Wb;d.toString=V.prototype.Wb;
function $f(a){var b=String(a);if("#"===b.slice(0,1))return Xf(b);if("hsl("===b.slice(0,4)){a=new V;var c=/^hsl\((\d*(?:\.\d+)?),\s*(\d*(?:\.\d+)?)%,\s*(\d*(?:\.\d+)?)%\)$/.exec(b);if(!c)throw new SyntaxError('Invalid HSL color: "'+b+'"');var b=+c[2],e=+c[3],b=b/100,e=e/100,f=b*(.5>e?e:1-e),g=e+f,c=[+c[1],100*(0<e?2*f/g:b),100*g];return Vf(a,c[0],c[1],c[2])}if("rgb("===b.slice(0,4)){a=new V;c=/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/.exec(b);if(!c)throw new SyntaxError('Invalid RGB color: "'+b+'"');return Wf(a,
+c[1],+c[2],+c[3])}if(6>=b.length)return Xf(b);throw Error("could not parse color: "+a);}function Yf(a,b,c){var e=parseInt(a.charAt(b),16)|0;return 16*e+(1==c?e:parseInt(a.charAt(b+1),16)|0)};function ag(a){this.td=a.td;this.Ga=a.Ga;this.ue=a.ue;this.vf=a.vf||"#cc0000"}ag.prototype.create=function(a){return A(this.td,"/teams",{displayName:a}).spread(function(a){return Wc(a.brand)})};function bg(a,b){this.F=a;this.Xe=b||null;this.Rc=this.Ec=null}bg.prototype.read=function(a){this.Ec||(cg++,dg.splice(cg,0,this));this.Ec=a;if(W==eg||W==fg)this.F.requestAnimationFrame(gg),W=hg;return this};bg.prototype.write=function(a){this.Rc||(ig++,jg.splice(ig,0,this));this.Rc=a;W==eg&&(this.F.requestAnimationFrame(gg),W=hg);return this};var eg=0,hg=1,fg=3,W=eg,dg=[],jg=[],cg=0,ig=0;
function gg(){var a,b;W=2;ig=-1;for(a=0;a<dg.length;a++){cg=a;b=dg[a];var c=b.Ec;b.Ec=null;c&&c.call(b.Xe,b)}dg.length=0;cg=-1;W=fg;for(a=0;a<jg.length;a++)ig=a,b=jg[a],c=b.Rc,b.Rc=null,c&&c.call(b.Xe,b);jg.length=0;ig=-1;W!=hg&&(W=eg)};function kg(a){var b=this,c=window.MutationObserver||window.WebKitMutationObserver;this.ib=null;this.zb={nodeinserted:[],noderemoved:[],characterdatamodified:[],attrmodified:[]};this.ka=a?a:{attributes:!1,childList:!0,characterData:!0,subtree:!0};this.oe=new c(function(a){a.forEach(function(a){b.handle(a)})})}kg.prototype.normalize=function(a){return a.toLowerCase()};kg.prototype.on=function(a,b){a=this.normalize(a);this.zb.hasOwnProperty(a)||(this.zb[a]=[]);this.zb[a].push(b);return this};
kg.prototype.handle=function(a){function b(b){var f=c.normalize(b),g=new jQuery.Event(b);c.ib&&(g.target=a.target,g.currentTarget=c.ib.get(0),c.zb.hasOwnProperty(f)&&c.zb[f].forEach(function(a){a.call(c.ib,g)}))}var c=this;"childList"===a.type?(a.addedNodes&&0<a.addedNodes.length?b("nodeInserted"):a.removedNodes&&0<a.removedNodes.length&&b("nodeRemoved"),b("subtreeModified")):"attributes"===a.type?b("attrModified"):"characterData"===a.type&&b("characterDataModified")};
kg.prototype.observe=function(a){var b=$(a).get(0);if(this.ib)throw Error("Already observing an element");b&&(this.oe.observe(b,this.ka),this.ib=$(a))};function lg(a,b){this.te=this.se=this.re=this.qe=this.pb=this.fb=this.Kd=this.Ld=this.scrollHeight=this.scrollWidth=this.scrollTop=this.scrollLeft=0;this.Qc=this.qc=null;this.Ze=!!b;this.Ud=new bg(u,this);this.Vd=new bg(u,this);this.Nc=new kg({attributes:!0,attributeFilter:["class","style"],childList:!0,characterData:!1,subtree:!0});this.C=a;this.da=$("\x3cdiv\x3e").addClass("scrollThumb");this.ia=$("\x3cdiv\x3e").addClass("scrollThumb");this.Da=this.Da.bind(this);this.yc=this.yc.bind(this);this.vc=
this.vc.bind(this);this.wc=this.wc.bind(this);this.tc=this.tc.bind(this);this.uc=this.uc.bind(this);this.Jb=this.Jb.bind(this);this.Kb=this.Kb.bind(this);this.rc=this.rc.bind(this);this.sc=this.sc.bind(this)}d=lg.prototype;d.trigger=Backbone.Events.trigger;d.on=Backbone.Events.on;d.off=Backbone.Events.off;
d.render=function(){this.C.addClass("scrollElement");$("\x3cdiv\x3e").addClass("scrollTrack hScrollTrack").append(this.da).insertAfter(this.C);$("\x3cdiv\x3e").addClass("scrollTrack vScrollTrack").append(this.ia).insertAfter(this.C);mg(this);this.C.on("scroll",this.yc);this.C.on("transitionend",this.Da);this.C.on("mouseenter",this.vc);this.C.on("mouseleave",this.wc);this.da.on("mousedown",this.tc);this.ia.on("mousedown",this.uc);this.Nc.on("attrModified",this.Da);this.Nc.on("subtreeModified",this.Da);
this.Nc.observe(this.C);$("\x3cspan\x3e").appendTo(this.C).remove();$(window).on("resize",this.Da);return this};d.remove=function(){var a=this.Nc;a.oe.disconnect();a.ib=null;this.C.off("scroll",this.yc);this.C.off("transitionend",this.Da);this.C.off("mouseenter",this.vc);this.C.off("mouseleave",this.wc);this.da.off("mousedown",this.tc);this.ia.off("mousedown",this.uc);$(window).off("resize",this.Da);return this};
function mg(a){(new bg(u,a)).read(function(a){var c=this.C.prop("clientWidth"),e=this.C.prop("offsetWidth"),f=this.C.prop("clientHeight"),g=this.C.prop("offsetHeight");a.write(function(){e>c&&this.C.css("margin-right",c-e);g>f&&this.C.css("margin-bottom",f-g);this.Ud.read(this.$e)})})}
d.$e=function(){var a=this.scrollWidth,b=this.scrollHeight,c=this.fb,e=this.pb;this.scrollWidth=this.C.prop("scrollWidth");this.scrollHeight=this.C.prop("scrollHeight");this.Ld=this.C.prop("clientWidth");this.Kd=this.C.prop("clientHeight");this.fb=this.da.parent().outerWidth();this.pb=this.ia.parent().outerHeight();if(a!==this.scrollWidth||b!==this.scrollHeight||c!==this.fb||e!==this.pb)this.scrollTop=this.scrollLeft=-1,this.Ud.write(this.Rg),this.Vd.read(this.af)};
d.Rg=function(){var a=Math.round(this.pb*this.Kd/this.scrollHeight);this.da.css("width",Math.round(this.fb*this.Ld/this.scrollWidth)+"px");this.ia.css("height",a+"px");var a=this.Ld<this.scrollWidth,b=this.Kd<this.scrollHeight,c=a!==this.qc,e=b!==this.Qc;c&&(this.qc=a,this.da.toggleClass("disabled",!a));e&&(this.Qc=b,this.ia.toggleClass("disabled",!b));this.Ze&&(c||e)&&this.trigger("change:scrollability",this.qc,this.Qc)};
d.af=function(){var a=this.scrollLeft,b=this.scrollTop;this.scrollLeft=this.C.scrollLeft();this.scrollTop=this.C.scrollTop();if(a!==this.scrollLeft||b!==this.scrollTop)this.Vd.write(this.Sg),this.Ze&&(this.qc||this.Qc)&&this.trigger("scroll",this.scrollLeft,this.scrollTop)};d.Sg=function(){var a=Math.round(this.pb*this.scrollTop/this.scrollHeight);this.da.css("transform","translateX("+Math.round(this.fb*this.scrollLeft/this.scrollWidth)+"px)");this.ia.css("transform","translateY("+a+"px)")};
d.Da=function(){this.Ud.read(this.$e)};d.yc=function(){this.Vd.read(this.af)};d.vc=function(){this.da.addClass("ready");this.ia.addClass("ready")};d.wc=function(){this.da.removeClass("ready");this.ia.removeClass("ready")};d.tc=function(a){0===a.button&&(this.qe=a.screenX,this.se=this.scrollLeft,this.da.addClass("active"),$(document).on("mousemove",this.Jb).on("mouseup",this.rc),a.preventDefault(),a.stopPropagation())};
d.Jb=function(a){this.C.scrollLeft(this.se+Math.round((a.screenX-this.qe)*this.scrollWidth/this.fb))};d.rc=function(a){this.Jb(a);this.da.removeClass("active");$(document).off("mousemove",this.Jb).off("mouseup",this.rc)};d.uc=function(a){0===a.button&&(this.re=a.screenY,this.te=this.scrollTop,this.ia.addClass("active"),$(document).on("mousemove",this.Kb).on("mouseup",this.sc),a.preventDefault(),a.stopPropagation())};
d.Kb=function(a){this.C.scrollTop(this.te+Math.round((a.screenY-this.re)*this.scrollHeight/this.pb))};d.sc=function(a){this.Kb(a);this.ia.removeClass("active");$(document).off("mousemove",this.Kb).off("mouseup",this.sc)};function X(){}X=Backbone.View.extend({className:"colorPicker showColorCode"});d=X.prototype;d.initialize=function(a){this.G=a.G;this.W=(a.W||X.df).clone();this.Mb=this.Mb.bind(this);this.Ob=this.Ob.bind(this);this.Nb=this.Nb.bind(this);this.Pb=this.Pb.bind(this)};d.events=function(){return{"mousedown .colorPickerSpectrum":this.ug,"mousedown .colorPickerValue":this.vg,"keydown .colorPickerHexCode":this.qg,"input .colorPickerHexCode":this.hg}};
d.render=function(){this.$el.addClass("on");this.$el.html(X.TEMPLATE({colorCodeLabel:this.G.format("colorPickerColorCode")}));ng(this);og(this);pg(this);return this};d.remove=function(){var a=this;this.$el.removeClass("on");this.$el.one("animationend",function(){$(document).off("mousemove",a.Mb);$(document).off("mouseup",a.Ob);$(document).off("mousemove",a.Nb);$(document).off("mouseup",a.Pb);Backbone.View.prototype.remove.call(a)});return this};
function ng(a){var b=Math.PI/180*a.W.h,c=(X.ae-X.qb)*a.W.s/100,e=c*Math.cos(b),b=c*Math.sin(b);a.$(".colorPickerSpectrum \x3e .marker").css("transform","translate("+e+"px, "+b+"px)");a.$(".colorPickerValue").css("background-color",Zf(a.W).Wb())}function og(a){var b=(X.be-2*X.qb)*(100-a.W.sd())/100;a.$(".colorPickerValue \x3e .marker").css("transform","translateX("+b+"px)")}function pg(a){var b=a.$(".colorPickerHexCode");b.blur();b.val(a.W.Wb().slice(1))}
function qg(a,b){var c=b.clientX;b=b.clientY;var e=a.$(".colorPickerSpectrum").get(0).getBoundingClientRect(),f=e.left+e.width/2,e=e.top+e.height/2,g;f==c?g=e>b?1.5*Math.PI:.5*Math.PI:(g=Math.atan((b-e)/(c-f)),f<c?b<e&&(g=2*Math.PI+g):g=Math.PI+g,isNaN(g)&&(g=0));g=180*g/Math.PI;g%=360;0>g&&(g+=360);Vf(a.W,g,100*Math.min(Math.sqrt(Math.pow(c-f,2)+Math.pow(b-e,2))/(X.ae-X.qb),1),a.W.sd());ng(a);pg(a);a.trigger("preview",a.W.clone())}
function rg(a,b){b=b.clientX;var c=a.$(".colorPickerValue").get(0).getBoundingClientRect(),e=a.W;Vf(e,e.h,e.s,100-100*Math.max(0,Math.min((b-c.left-X.qb)/(X.be-2*X.qb),1)));og(a);pg(a);a.trigger("preview",a.W.clone())}d.ug=function(a){0===a.button&&(a.preventDefault(),qg(this,a),this.undelegateEvents(),this.$(".colorPickerSpectrum").addClass("mousedown"),$(document).on("mousemove",this.Mb),$(document).on("mouseup",this.Ob))};d.Mb=function(a){qg(this,a)};
d.Ob=function(a){$(document).off("mousemove",this.Mb);$(document).off("mouseup",this.Ob);this.$(".colorPickerSpectrum").removeClass("mousedown");this.delegateEvents();qg(this,a)};d.vg=function(a){0===a.button&&(a.preventDefault(),rg(this,a),this.undelegateEvents(),this.$(".colorPickerValue").addClass("mousedown"),$(document).on("mousemove",this.Nb),$(document).on("mouseup",this.Pb))};d.Nb=function(a){rg(this,a)};
d.Pb=function(a){$(document).off("mousemove",this.Nb);$(document).off("mouseup",this.Pb);this.$(".colorPickerValue").removeClass("mousedown");this.delegateEvents();rg(this,a)};d.qg=function(a){if(13===a.which||27===a.which)a.preventDefault(),this.trigger("confirm")};d.hg=function(){var a=this.$(".colorPickerHexCode").val(),a=a.replace(/\W+/g,"").slice(0,6).replace(/[^0-9a-f]/gi,"0"),b;a:{try{b=$f(a);break a}catch(c){}b=null}this.W=b||Wf(new V,0,0,0);ng(this);og(this);this.trigger("preview",this.W.clone())};
X.df=Wf(new V,255,255,255);X.ae=100;X.qb=10;X.be=200;X.TEMPLATE=_.template('\x3cdiv class\x3d"colorPickerSpectrum"\x3e\x3cdiv class\x3d"marker"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"colorPickerValue"\x3e\x3cdiv class\x3d"marker"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"colorPickerColorCode"\x3e\x3c%- data.colorCodeLabel %\x3e #\x3cinput class\x3d"colorPickerHexCode" maxlength\x3d"6" spellcheck\x3d"false"\x3e\x3c/div\x3e',{variable:"data"});function sg(a){this.items=[];this.Ge=a.Ge||Infinity;this.Ad=a.Ad||0;this.placeholder=a.placeholder;this.X=a.X;this.root=a.root;this.view=new tg({hc:!!a.hc,ba:a.ba,tb:a.tb,Ab:a.Ab||"",Fb:a.Fb,placeholder:a.placeholder});this.view.render(this.items);this.view.getElement().appendTo(this.root);this.listenTo(this.view,{add:this.add,submit:this.submit});for(a=0;a<this.Ad;a++)this.add()}d=sg.prototype;d.listenTo=Backbone.Events.listenTo;d.off=Backbone.Events.off;d.on=Backbone.Events.on;d.stopListening=Backbone.Events.stopListening;
d.trigger=Backbone.Events.trigger;_.extend(sg.prototype,Backbone.Events);d=sg.prototype;d.add=function(a,b){a=new Y({changed:void 0!==a,focus:!!b,placeholder:this.placeholder,X:this.X,title:a||""});this.items.push(a);this.view.render(this.items);this.items.length>=this.Ge&&(b=this.view,b.gb.remove(),b.Fb&&(b.xd||(b.xd=$('\x3cp class\x3d"dynamicListMaxReached feedback feedback--warning"\x3e\x3c/p\x3e').html(b.Fb))).insertAfter(".dynamicListBlurb"));this.listenTo(a,{empty:this.ng.bind(this,a)})};
d.accept=function(a){this.items.forEach(function(b){if(b.toString()===a){b.stopListening(b.view);var c=b.view,e=!b.Sc;c.$el.removeClass("dynamicListItemRejected");ug(c,"dynamicListItemAccepted",e);b.Sc=!0}});vg(this)};function vg(a){0===wg(a).length&&a.view.Xb(!1)}function wg(a){return a.items.filter(function(a){return!a.Sc&&!a.isRejected()&&!a.Rd}).filter(function(a){return a.hasChanged()})}
d.reject=function(a){this.items.forEach(function(b){if(b.toString()===a){b.stopListening(b.view);var c=b.view,e=!b.Jd;c.$el.removeClass("dynamicListItemAccepted");ug(c,"dynamicListItemRejected",e);b.Jd=!0}});vg(this)};d.remove=function(a){var b=this.items.indexOf(a);a.remove();this.stopListening(a);0<=b&&this.items.splice(b,1)};d.ng=function(a){this.items.length>this.Ad&&(this.remove(a),a=this.view,xg(a).insertBefore(".buttonSubmit"),a.xd&&a.xd.remove())};
d.submit=function(){function a(a){return a.hasChanged()}function b(a){a.stopListening(a.view);ug(a.view,"dynamicListItemSubmitted",!a.Rd);a.Rd=!0}function c(a){this.trigger("item",a.eb(),a.getSelection())}setTimeout(function(){vg(this);wg(this).forEach(c,this);this.items.filter(a).forEach(b);this.trigger("submit")}.bind(this),500)};function Y(a){function b(a){return!0===a.selected}this.Sc=!1;this.changed=a.changed;this.focus=a.focus;this.placeholder=a.placeholder;this.Rd=this.Jd=!1;this.selection=void 0;this.X=a.X;this.title=a.title;this.view=new yg;this.listenTo(this.view,{change:this.change,commit:this.pf,select:this.select});this.X&&(this.selection=(this.X.filter(b)[0]||{}).value,this.changed&&this.X&&zg(this.view,this.X))}Y.prototype.listenTo=Backbone.Events.listenTo;Y.prototype.stopListening=Backbone.Events.stopListening;
Y.prototype.trigger=Backbone.Events.trigger;_.extend(Y.prototype,Backbone.Events);d=Y.prototype;d.change=function(a){this.title=a;!this.changed&&this.X&&this.X&&zg(this.view,this.X);this.changed=!0};d.pf=function(){this.hasChanged()&&(this.isEmpty()?this.trigger("empty"):this.trigger("commit"))};d.eb=function(){return this.title};d.getSelection=function(){return this.selection};d.hasChanged=function(){return this.changed};d.isEmpty=function(){return""===this.title};d.isRejected=function(){return!!this.Jd};
d.select=function(a){a!==this.selection&&(Ag(this,a),this.changed=!0)};function Ag(a,b){a.X.forEach(function(a){a.value===b&&(this.selection=b)},a)}d.remove=function(){Bg(this.view);this.stopListening(this.view)};function Cg(a){function b(){c.view.focus()}var c=a;a.view.render(a.title,a.placeholder);a.focus&&setTimeout(b,0)}d.toString=function(){return this.title};function yg(){}yg=Backbone.View.extend({tagName:"li",className:"dynamicListItem"});d=yg.prototype;d.events=function(){return{"blur input":this.eg,"focus input":this.gg,"input input":this.ig,"keypress input":this.jg,"click input":this.fg,"change select":this.Bg}};d.focus=function(){var a,b;b=this.$el.find("input").get(0);a=b.value.length;b.createTextRange?b.focus():b.setSelectionRange&&(b.selectionStart||0===b.selectionStart)?(b.focus(),b.setSelectionRange(a,a)):b.focus()};d.getElement=function(){return this.$el};
function Bg(a){a.$el.addClass("dynamicListItemRemoved");window.setTimeout(function(){this.remove();this.off()}.bind(a),300)}d.eg=function(){this.trigger("commit")};d.gg=function(a){$(a.target).select();a.preventDefault();return!1};d.ig=function(a){a=$(a.target).val();this.trigger("change",a)};d.jg=function(a){13!==a.which&&9!==a.which||this.trigger("commit")};d.fg=function(a){$(a.target).select();a.preventDefault();return!1};d.Bg=function(a){a=$(a.target).val();this.trigger("select",a)};
d.render=function(a,b){var c="dyn"+Date.now();this.input||(this.input=$('\x3cinput autocomplete\x3d"off" class\x3d"dynamicListItemValue textInput" /\x3e').attr("name",c).attr("placeholder",b),this.$el.empty(),this.$el.append(this.input));this.input.val(a);this.Va&&this.$el.append(this.Va);return this};
function zg(a,b){function c(a){var b=$("\x3coption\x3e");b.val(a.value).text(a.text).prop("selected",a.selected);this.select.append(b)}function e(){this.Va.removeClass("dynamicListItemCategoryAppear")}a.Va||(a.Va=$('\x3cspan class\x3d"select dynamicListItemCategory"\x3e\x3c/span\x3e'),a.Va.addClass("dynamicListItemCategoryAppear"),setTimeout(e.bind(a),350),a.select=$("\x3cselect\x3e\x3c/select\x3e"),a.Va.append(a.select),b.forEach(c,a));a.$el.append(a.Va)}
function ug(a,b,c){c&&(a.$el.addClass("dynamicListItemMarked"),setTimeout(function(){a.$el.removeClass("dynamicListItemMarked")},350));a.$el.find("input").prop("disabled",!0);a.$el.find("select").prop("disabled",!0);a.$el.addClass(b)};function tg(){}tg=Backbone.View.extend({className:"dynamicList"});d=tg.prototype;d.initialize=function(a){this.hc=a.hc;this.ba=a.ba;this.tb=a.tb;this.Ab=a.Ab||"";this.Fb=a.Fb;this.vd=!1;this.De=0;this.Hd=!1;this.placeholder=a.placeholder};d.events=function(){return{"click .dynamicListItemAdder button":this.kg,"input .dynamicListItemAdder input":this.lg,"keydown .dynamicListItem input":this.og,"keydown .dynamicListItemAdder input":this.mg,"keydown .buttonSubmit:not(:disabled)":this.Wf,"mousedown .buttonSubmit:not(:disabled)":this.Xf}};
d.getElement=function(){return this.$el};function Dg(a){function b(){this.gb.addClass("dynamicListItemAdded");setTimeout(c.bind(this),300);this.trigger("add",e.val(),!0);e.val("");this.Hd=this.vd=!1}function c(){this.gb.removeClass("dynamicListItemAdded")}var e=a.gb.find("input"),f=Date.now();500<f-a.De&&(a.De=f,a.Hd?setTimeout(b.bind(a),300):b.call(a))}d.submit=function(){this.gb.find("input").blur();this.Xb(!0);this.Hd=!0;this.trigger("submit")};
d.Xb=function(a){this.We.toggleClass("buttonSpinner",a)};d.kg=function(){Dg(this)};d.lg=function(){this.vd=!0;Dg(this)};d.Wf=function(a){13===a.which&&this.submit()};d.Xf=function(){this.submit()};d.mg=function(a){if(13===a.which||9===a.which)this.vd?Dg(this):a.shiftKey||this.$el.find(".buttonSubmit").focus()};d.og=function(a){if(13===a.which||9===a.which)return a.shiftKey?$(a.target).parent().prev().find("input").focus():$(a.target).parent().next().find("input").focus(),!1};
d.render=function(a){var b=Eg(this);this.Ab&&this.$el.append(this.Mf||(this.Mf=$('\x3ch3 class\x3d"dynamicListHeading"\x3e\x3c/h3\x3e').text(this.Ab)));this.tb&&this.$el.append(this.kf||(this.kf=$('\x3cp class\x3d"dynamicListBlurb"\x3e\x3c/p\x3e').html(this.tb)));this.$el.append(b);a.forEach(function(a){Cg(a);b.append(a.view.getElement())});b.append(xg(this));this.$el.append(this.We||(this.We=Fg(this)));return this};
function xg(a){var b;if(!(b=a.gb)){var c=$('\x3cli class\x3d"dynamicListItem dynamicListItemAdder"\x3e\x3c/li\x3e');a.hc?b=$('\x3cbutton class\x3d"dynamicListItemAdderButton textInput"\x3e+ Add another\x3c/button\x3e'):(b=$('\x3cinput class\x3d"dynamicListItemValue textInput" value\x3d"" autocomplete\x3d"off" /\x3e'),b.attr("placeholder",a.placeholder));c.append(b);b=a.gb=c}return b}function Eg(a){a=a.$el.find("ul");0===a.length&&(a=$('\x3cul class\x3d"dynamicListItems"\x3e'));return a}
function Fg(a){var b=$('\x3cbutton class\x3d"button buttonBlock buttonSubmit"\x3e\x3c/button\x3e');b.text(a.ba);b.append('\x3cdiv class\x3d"spinner" /\x3e');return b};function Gg(){this.jb=window.pricingPlans};function Hg(a){this.plan=a.Ig;this.title=a.title;this.pricePerMonthText=a.Mg;this.pricePerIntervalText=a.Lg;this.summaryText=a.kh;this.billingCycleText=a.hf}
function cf(a,b,c){function e(a,c,e){if("MONTHLY"===c)return e?b.format("canvaForWorkUpgradePlanSummaryMonthlyPerUser",a):b.format("canvaForWorkUpgradePlanSummaryMonthly",a);if("YEARLY"===c)return e?b.format("canvaForWorkUpgradePlanSummaryYearlyPerUser",a):b.format("canvaForWorkUpgradePlanSummaryYearly",a);throw Error("unrecognised BillingInterval");}var f=a.slice(0).sort(function(a,b){return H(b)-H(a)})[0];return a.map(function(a){var k;if("MONTHLY"===G(a))k=b.format("canvaForWorkUpgradePlanMonthly");
else if("YEARLY"===G(a))k=b.format("canvaForWorkUpgradePlanYearly");else throw Error("unrecognised plan billing interval");var n=e(Math.round(a.Pa()/("YEARLY"===G(a)?12:1)*100)/100,"MONTHLY",!!c),q=e(a.Pa(),G(a),!!c),m;m=!!c;m="YEARLY"===G(a)?b.format("canvaForWorkUpgradePlanPercentSaving",((H(f)-H(a))/H(f)*100).toFixed(0)/100):e(H(a),"YEARLY",m);return new Hg({Ig:a,title:k,Mg:n,Lg:q,kh:m,hf:"YEARLY"===G(a)?b.format("canvaForWorkUpgradePlanBilledYearly",a.Pa()):""})})};function Ig(){}Ig=M.extend({className:"createTeamDialog"});Ig.prototype.events=function(){return _.extend(M.prototype.events.call(this),{"click .createTeamDialogCreate":this.trigger.bind(this,"createTeam")})};Ig.prototype.initialize=function(a){this.jb=a.jb;this.$d=Object.freeze(x(F,this.jb.jb.paidYearly));this.ha=a.ha;M.prototype.initialize.call(this,{F:u,Jc:!0,ic:!0,Y:!0})};
Ig.prototype.render=function(){M.prototype.render.call(this);var a=moment().add(this.$d.xb(),"days").format("LL"),b=(H(this.$d)/12).toFixed(2),c=this.$d.xb();this.$(".dialog").html(this.qf({createTeamWelcomeDescription:this.ha.sf(b),createTeamWelcomeTitleHtml:this.ha.tf(c),createTrialPeriodPoint1Html:this.ha.ge(a),createTrialPeriodPoint2:this.ha.he(),createTrialPeriodPoint3Html:this.ha.ie(),createYourTeam:this.ha.uf()}));return this};Ig.prototype.qf=_.template('\x3cdiv class\x3d"createTeamContent"\x3e\x3ch2\x3e\x3c%\x3d createTeamWelcomeTitleHtml %\x3e\x3c/h2\x3e\x3cp\x3e\x3c%- createTeamWelcomeDescription %\x3e\x3c/p\x3e\x3cul\x3e\x3cli\x3e\x3c%\x3d createTrialPeriodPoint1Html %\x3e\x3c/li\x3e\x3cli\x3e\x3c%- createTrialPeriodPoint2 %\x3e\x3c/li\x3e\x3cli\x3e\x3c%\x3d createTrialPeriodPoint3Html %\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3cdiv class\x3d"createTeamActions"\x3e\x3cbutton class\x3d"button createTeamDialogCreate"\x3e\x3c%- createYourTeam %\x3e\x3c/button\x3e\x3c/div\x3e');function Jg(a){return new P(function(b,c){var e,f;e=new FormData;e.append("key",a.key);e.append("AWSAccessKeyId",a.ff);e.append("policy",a.Jg);e.append("signature",a.hh);e.append("Content-Type",a.Tf||a.file.type);e.append("file",a.file);f=new XMLHttpRequest;f.onerror=c;f.onreadystatechange=function(){var a,e;4===f.readyState&&(e=(a=xc(f.status))&&f.getResponseHeader("x-amz-version-id"),a&&e?b(e):c())};f.upload.addEventListener("progress",a.progress||function(){});f.open("POST",a.url,!0);f.send(e)})}
;function Kg(a,b){this.id=a;this.media=b;this.Pe=[]}Kg.prototype.o=function(){return this.id};Kg.prototype.send=function(){return P.reject("Not implemented")};Kg.prototype.Fg=function(a){if(a.lengthComputable){a=a.loaded/a.total;for(var b=0;b<this.Pe.length;b++)this.Pe[b](this.media,a)}};function Lg(a){a=function(a){var c=/^([^?]+)\?/.exec(a);return c?c[1]:a}(a);return _.find(Mg,function(b,c){return a.slice(-c.length)===c})}var Mg={".gif":"image/gif",".jpg":"image/jpeg",".jpeg":"image/jpeg",".png":"image/png",".ttf":"application/x-font-truetype",".otf":"application/x-font-otf",".woff":"application/font-woff"};function Ng(a){Kg.call(this,a.id,a.media);this.file=a.file;this.nd=a.nd;this.ud=a.ud;this.Gg=void 0;this.ya=a.ya;this.Be=a.ci.Be("canva.editor.uploadrate")}Ng.prototype=Object.create(Kg.prototype);Ng.prototype.constructor=Ng;
Ng.prototype.send=P.method(function(){var a=this,b=a.file.type||Lg(a.file.name),c=this.ya.now();return this.ud.Vh(this.media.o(),this.media.bundle.getVersion(),b).then(function(c){return Jg({ff:c.Ph(),file:a.file,Tf:b,key:c.getKey(),Jg:c.Sh(),progress:a.Fg.bind(a),hh:c.Uh(),url:c.Th()})}).tap(function(){a.Be.update(a.file.size/(a.ya.now()-c))}).then(function(c){var f=new sc;f.importVersion=c;f.mimeType=b;f.isPaid=!0===a.Gg;a.nd&&(f.folderKey=a.nd);return a.ud.Yh(a.media.o(),a.media.bundle.getVersion(),
f)}).catch(this.Tg.bind(this))});Ng.prototype.Tg=function(){throw Error("Unfortunately your upload failed :(\n\nPlease ensure that:\n   - the size of the image is under 25MB;\n   - the image is a .png, .jpg or .svg file;\n   - the image uses an RGB color model (i.e. not CMYK); and,\n   - you have a stable internet connection.\n\nIf you feel that you have met the above criteria and the image is still failing to upload, please let the team know by emailing support@canva.com");};function Og(a){Backbone.View.call(this,{className:"active brand"});this.v=a.v;this.Yc=Pg({j:a.j,i:a.i,size:60,va:!0});this.j=a.j;this.i=a.i;this.Ea=!!a.Ea}ha(Og,Backbone.View);
Og.prototype.render=function(){var a=this.el,b;b=this.j.Cb()?this.v.Ed():this.j.aa();var c=this.i.aa(),e="/"+this.i.Qa(),f=this.v.eh(),g=this.v.th(),k=this.Ea;soy.asserts.assertType(null==e||e instanceof goog.soy.data.SanitizedContent||goog.isString(e),"profilePageUrl",e,"null|string|undefined");soy.asserts.assertType(null==c||c instanceof goog.soy.data.SanitizedContent||goog.isString(c),"displayName",c,"null|string|undefined");soy.asserts.assertType(null==b||b instanceof goog.soy.data.SanitizedContent||
goog.isString(b),"brandName",b,"null|string|undefined");soy.asserts.assertType(goog.isString(f)||f instanceof goog.soy.data.SanitizedContent,"settings",f,"string|goog.soy.data.SanitizedContent");soy.asserts.assertType(goog.isString(g)||g instanceof goog.soy.data.SanitizedContent,"viewProfile",g,"string|goog.soy.data.SanitizedContent");soy.asserts.assertType(goog.isBoolean(k)||1===k||0===k,"openInNewTab",k,"boolean");k=!!k;b=soydata.VERY_UNSAFE.ordainSanitizedHtml('\x3cdiv class\x3d"activeUser"\x3e\x3cdiv class\x3d"userDisplayName"\x3e'+
soy.$$escapeHtml(c)+'\x3c/div\x3e\x3cdiv class\x3d"teamDisplayName"\x3e'+soy.$$escapeHtml(b)+'\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"userMenuBrandActions"\x3e\x3ca href\x3d"/account"'+(k?' target\x3d"_blank"':"")+"\x3e"+soy.$$escapeHtml(f)+"\x3c/a\x3e"+(e?'\x3ca href\x3d"'+soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(e))+'"'+(k?' target\x3d"_blank"':"")+"\x3e"+soy.$$escapeHtml(g)+"\x3c/a\x3e":"")+"\x3c/div\x3e");a.innerHTML=b;this.$el.children().first().append(this.Yc.$el);return this};function Qg(){}Qg=Backbone.View.extend({tagName:"li",className:"brand"});Qg.prototype.initialize=function(a){var b;if(a.Ja.j.Cb())b=Rg({i:a.i,size:36});else{b={j:a.Ja.j,size:36};var c=Sg(b.j),e=Tg(b.j);b=new Ug({Ra:c,wa:e,size:b.size,ra:b.ra,sa:b.sa,va:b.va,oa:b.oa});b.render()}this.Yc=b;this.Ja=a.Ja;this.v=a.v};
Qg.prototype.render=function(){this.$el.html(this.template({personal:this.Ja.j.Cb(),personalLabel:this.v.format("userMenuPersonalBrandLabel"),displayName:this.Ja.j.aa(),url:this.Ja.url}));this.$(".left").append(this.Yc.$el);return this};Qg.prototype.template=_.template('\x3ca href\x3d"\x3c%- url %\x3e"\x3e\x3cdiv class\x3d"left"\x3e\x3c/div\x3e\x3cdiv class\x3d"right"\x3e\x3c% if (personal) { %\x3e\x3c%- personalLabel %\x3e\x3c% } else { %\x3e\x3c%- displayName %\x3e\x3c% } %\x3e\x3c/div\x3e\x3c/a\x3e');function Vg(){}Vg=Backbone.View.extend({className:"brandListWrapper"});Vg.prototype.initialize=function(a){this.Ka=a.Ka;this.i=a.i;this.v=a.v};function Wg(a,b){if(!a.el.parentElement)throw Error("This element must be added to the DOM before display() can be called");b&&a.$el.addClass("animate");b=a.$el.find("ul").height();a.$el.height(b)}
Vg.prototype.render=function(){var a=$('\x3cul class\x3d"brandList"\x3e');this.$el.html(a);this.Ka.forEach(function(b){(new Qg({Ja:b,i:this.i,v:this.v})).render().$el.appendTo(a)}.bind(this));return this};function Z(){}Z=Backbone.View.extend({className:"actions",tagName:"ul"});Z.prototype.initialize=function(a){this.v=a.v;this.ob=!!a.ob};Z.prototype.render=function(){this.$el.toggleClass("singleAction",!this.ob);this.$el.html(this.template({showUpgradeButton:this.ob,upgrade:this.v.$b(),signOut:this.v.signOut()}));return this};Z.prototype.events=function(){return{"click #upgrade":this.trigger.bind(this,"upgrade")}};Z.prototype.template=_.template('\x3c% if (showUpgradeButton) { %\x3e\x3ca class\x3d"button buttonSmall" id\x3d"upgrade"\x3e\x3c%- upgrade %\x3e\x3c/a\x3e\x3c% } %\x3e\x3ca class\x3d"button buttonLink" href\x3d"/logout"\x3e\x3c%- signOut %\x3e\x3c/a\x3e');function Xg(){}Xg=Q.extend({className:"userMenuContainer"});
Xg.prototype.initialize=function(a){this.ya=a.ya;this.Ne=null;this.i=a.i;this.v=a.v;this.bc=a.bc;this.ua=a.ua;this.Vc=this.Vc=new Og({v:a.v,j:this.bc.j,i:a.i,Ea:a.Ea});this.Zc=this.ub=null;var b=$("\x3cdiv\x3e\x3c/div\x3e");b.append(this.Vc.render().$el);a=new Z({v:a.v,ob:a.ob});this.listenTo(a,{remove:this.remove,upgrade:this.trigger.bind(this,"upgrade")});this.ua&&(this.Zc=$('\x3cspan class\x3d"brandListLoadingSpinner"\x3e'),b.append(this.Zc));b.append(a.render().$el);Q.prototype.initialize.call(this,
{content:b,position:["leftTop","top"]})};Xg.prototype.show=function(){this.Ne=this.ya.now();return Q.prototype.show.call(this)};Xg.prototype.bh=function(a){if(!this.ua)throw Error("Cannot use setBrands when showBrands is set to false");var b=this,c=function(){return a.filter(function(a){return a.j.o()!==b.bc.j.o()})}();this.ub&&this.ub.remove();0<c.length&&(this.ub=(new Vg({Ka:c,i:b.i,v:this.v})).render(),this.ub.$el.insertAfter(b.Vc.$el),Wg(this.ub,100<this.ya.now()-this.Ne));this.Zc.addClass("done")};function Yg(a){this.analytics=a.analytics;this.v=a.v;this.Uc=a.Uc;this.Ca=this.Ka=null;this.za=a.za;this.Wd=a.Wd||"user_menu";this.profiles=a.profiles;this.Oc=a.Oc;this.Od=a.Od;this.La=a.La;this.Vb=a.Vb;this.i=a.i;this.Wc=a.Wc;this.ua=void 0!==a.ua?a.ua:!0;this.Ea=!!a.Ea}d=Yg.prototype;d.init=function(){this.La.click(function(){this.La.toggleClass(this.Vb);this.La.hasClass(this.Vb)?Zg(this):this.Ca.remove()}.bind(this))};d.listenTo=Backbone.Events.listenTo;d.off=Backbone.Events.off;d.on=Backbone.Events.on;
d.stopListening=Backbone.Events.stopListening;d.trigger=Backbone.Events.trigger;d.Lc=function(){if(this.za){var a=this.za();a.on("signup",function(){window.location.href="/brand/onboarding/upgrader"});Rc(a);yb(this.analytics,this.Wd);this.Ca.remove()}};
function Zg(a){var b=function(){this.Ca=new Xg({v:this.v,bc:f(this.Uc),Oc:this.Oc,ob:this.Wc,profiles:this.profiles,i:this.i,ya:ua,ua:this.ua,Ea:this.Ea});this.ua&&c().bind(this.Ca).then(this.Ca.bh);Nc(this.Ca,this.Od);this.listenTo(this.Ca,{remove:g,hide:this.La.removeClass.bind(this.La,this.Vb),upgrade:this.Lc})}.bind(a),c=function(){return this.Ka?P.resolve(this.Ka):Vc(this.profiles).then(e)}.bind(a),e=function(a){return this.Ka=a.map(f)}.bind(a),f=function(a){var b=a.o();return{j:a,url:"/login/switch?brand\x3d"+
encodeURIComponent(b)}}.bind(a),g=function(){this.Ca=null}.bind(a);b()};function $g(){}function ah(){var a=x($g,window.clientInfo),b;b=x(bh,a.brandInfo);b.brand=Wc(b.brand);b.brandKit&&(b.brandKit=Object.freeze(x(E,b.brandKit)));b.subscription&&(b.subscription=Be(b.subscription));b=Object.freeze(b);a.brandInfo=b;b=x(ch,a.user);b.avatar=od(b.avatar);b=Object.freeze(b);a.user=b;return Object.freeze(a)}function bh(){}bh.prototype.D=function(){return this.brand};bh.prototype.getSubscription=function(){return this.subscription||null};function ch(){}d=ch.prototype;d.o=function(){return this.id};
d.Qa=function(){return this.username};d.aa=function(){return this.displayName};d.pd=function(){return this.roles};d.od=function(){return this.personalBrand};d.Ye=function(){return Uc({id:this.o(),username:this.Qa(),personalBrand:this.od(),displayName:this.aa(),avatar:this.avatar,roles:this.pd()})};function dh(a,b,c){this.text=b||null;b=Aa(a);this.text&&this.text.toLocaleLowerCase()===b.Yb().toLocaleLowerCase()&&(this.text=null);this.me=c||null;this.u=a}dh.prototype.on=Backbone.Events.on;dh.prototype.off=Backbone.Events.off;dh.prototype.trigger=Backbone.Events.trigger;function eh(a){this.jd=a.jd;this.Bd=a.Bd;this.fd=void 0!==a.fd?a.fd:500;this.H=null;this.Tb=[];this.selectedIndex=0;this.u=a.u;this.J=a.J;this.dd=a.dd;this.analytics=a.analytics;this.kb="";this.listenTo(this.J,{search:_.debounce(this.Zg,this.fd),select:this.yd.bind(this,!0),cancel:this.ce,focus:this.yd.bind(this,!1),"result:next":this.Ue,"result:previous":this.Ve,highlightSearchResults:this.Nf,blur:this.zg})}
function fh(a,b){var c=String.fromCharCode(b.which);b.shiftKey||(c=c.toLowerCase());return a+c}var gh=[{from:8,to:8,handler:function(a){return a.slice(0,-1)}},{from:32,to:32,handler:fh},{from:65,to:90,handler:fh},{from:48,to:57,handler:fh}];d=eh.prototype;d.listenTo=Backbone.Events.listenTo;d.stopListening=Backbone.Events.stopListening;d.stop=function(){this.stopListening(this.J);this.H&&this.H.remove();return this};
function hh(a,b,c){a.selectedIndex=Math.max(0,Math.min(a.Tb.length-1,b));a.H&&ih(a.H,a.selectedIndex,!!c)}d.ce=function(){this.H?(this.H&&this.H.remove(),this.J.md()):this.J.$(".sidebarSearchText").blur()};
d.yd=function(a,b){if(""!==this.kb&&(b||0!==this.Tb.length)){if(!this.H){b=jh;var c;c=this.J;c=c.Ac?P.resolve(c.Ac.animate({scrollTop:$(".sidebarSearch").parent().scrollTop()+$(".sidebarSearch").position().top},400).promise()):P.resolve();this.H=b(this,c)}this.H&&kh(this.H,{Fc:this.Tb,selectedIndex:this.selectedIndex});a&&(ih(this.H,0,!1)||this.J.md());lh(this.J,!0)}};d.Ue=function(){hh(this,this.selectedIndex+1)};d.Ve=function(){hh(this,this.selectedIndex-1)};
d.Nf=function(){this.H&&ih(this.H,this.selectedIndex,!1)};
d.Zg=function(a){function b(a){g.Tb=a;g.selectedIndex>=a.length?g.selectedIndex=a.length-1:0>g.selectedIndex&&(g.selectedIndex=0);g.yd(!0,!0)}function c(a){var b=new Vb;b.query=a+"*";return g.jd.search(b).then(e)}function e(a){return a.results?a.results.map(Yb):[]}function f(){g.J.Xb(!1)}var g=this;this.kb=a;a.length>=this.Bd?(g.analytics.track("design_search",{query:.05>Math.random()?a:void 0}),g.J.Xb(!0),c(a).then(b).finally(f)):""===a&&this.H&&this.H.remove()};
function jh(a,b){var c=a.dd(a.u);a.listenTo(c,{remove:a.Ag,cancel:a.ce,"result:hover":function(a){hh(this,a,!0)}.bind(a),"result:previous":a.Ve,"result:next":a.Ue,updateSearchText:a.J.md.bind(a.J),"key:passthrough":a.wg});Nc(c,a.J.$el);b.then(c.Zb.bind(c));return c}d.wg=function(a){function b(b){return a.which>=b.from&&a.which<=b.to}var c;c=a.originalEvent;var e=c.altKey||c.metaKey?null:gh.filter(b)[0];e&&(a.preventDefault(),c=e.handler(this.kb,c),c!==this.kb&&(this.kb=c,this.J.rh(c)))};
d.Ag=function(){this.stopListening(this.H);this.H=null;this.selectedIndex=0;lh(this.J,this.J.$(".sidebarSearchText").is(":focus"))};d.zg=function(){this.H||lh(this.J,!1)};function mh(){}mh=Backbone.View.extend({});d=mh.prototype;d.events=function(){return{"keydown .sidebarSearchText":this.Dd,"input .sidebarSearchText":this.Lb,"focus .sidebarSearchText":this.dg,"blur .sidebarSearchText":this.Vf}};d.initialize=function(a){this.Qb=a.Qb;this.$(".sidebarSearchText").attr("placeholder",this.Qb);this.Ac=a.Ac};d.Xb=function(a){this.$el.toggleClass("sidebarSearchInProgress",a)};
d.md=function(){var a=this.$(".sidebarSearchText").not(":focus").get(0);a&&(a.focus(),a.selectionStart=a.value.length)};d.rh=function(a){this.$(".sidebarSearchText").val(a);this.trigger("search",a)};function lh(a,b){a.$el.toggleClass("sidebarSearchActive",b)}function nh(a){switch(a){case 13:return"select";case 27:return"cancel";case 38:return"result:previous";case 40:return"result:next";case 9:return"highlightSearchResults"}return null}d.Vf=function(a){$(a.target).attr("placeholder",this.Qb);this.trigger("blur")};
d.dg=function(a){$(a.target).one("mouseup",function(a){a.preventDefault()}).attr("placeholder","").select();lh(this,!0);this.trigger("focus")};d.Dd=function(a){var b=nh(a.which);b&&(this.trigger(b),a.preventDefault())};d.Lb=function(a){this.trigger("search",$(a.target).val())};function oh(){}oh=Q.extend({className:"designSearchPopover"});oh.create=function(a){return new oh({position:"leftTop",u:a})};d=oh.prototype;d.initialize=function(a){Q.prototype.initialize.call(this,a);this.u=a.u;this.Te=[];this.Gc=null};d.events=function(){return _.extend({},Q.prototype.events.call(this),{"mouseenter .designSearchResult":this.tg,"click .designSearchResult":this.$f,keydown:this.Dd})};
function kh(a,b){function c(a,c){var f=new dh(e.u,a.eb(),a.designTypeDisplayName),q=a.o(),m=a.o(),m=tc(m,null),p=f.text||Aa(f.u).Yb();f.me&&(null===f.text||""===f.text)&&(p=f.me+"  "+p);return{id:q,href:m,title:p,thumbnail:a.pc().ma(),active:c===b.selectedIndex,designType:a.designTypeDisplayName}}var e=a,f=function(a){return 0<a.length?a.map(c).map(e.Db.bind(e)).join(""):e.Af({noResultsMessage:Ga(e.u).Je()})}(b.Fc);a.$(".content").addClass("scrollPane").html('\x3cul class\x3d"designSearchResultList"\x3e'+
f+"\x3c/ul\x3e");a.Te=b.Fc.map(function(a){return a.o()});kf(a,nb(Ga(a.u),b.Fc.length));a.$el.toggleClass("designSearchNoResults",0===b.Fc.length);a.Gc||(a.Gc=new lg(a.$(".content")),a.Gc.render(),a.on("remove",function(){this.Gc.remove()}))}
function ih(a,b,c){var e=a.$(".designSearchResult").eq(b);a.$(".designSearchResultActive").removeClass("designSearchResultActive");if(0>b)return!1;e.addClass("designSearchResultActive").focus();if(!c){var f=a.$(".designSearchResultActive");c=f.offset();f=f.height();a=a.$(".content");var g=a.height(),k=a.scrollTop(),n=Math.floor(g/f);b*f<k?a.scrollTop(k-f):c&&c.top>g&&a.scrollTop(Math.max(0,(b-(n-1))*f))}return 0<e.length}
d.$f=function(a){a=$(a.target).closest(".designSearchResult").index();0<=a&&this.trigger("select",this.Te[a])};d.tg=function(a){this.trigger("result:hover",$(a.target).closest(".designSearchResult").index())};
d.Dd=function(a){38===a.which?(this.trigger("result:previous"),a.preventDefault()):40===a.which?(this.trigger("result:next"),a.preventDefault()):27===a.which?this.trigger("cancel"):37===a.which?(this.trigger("cancel"),a.preventDefault()):9===a.which?(this.trigger("updateSearchText"),a.preventDefault()):13!==a.which&&this.trigger("key:passthrough",a)};d.Af=_.template('\x3cli class\x3d"designSearchResultNone"\x3e\x3c%- noResultsMessage %\x3e\x3c/li\x3e');d.Db=_.template('\x3ca class\x3d"designSearchResult\x3c% if (active) { %\x3e designSearchResultActive\x3c% } %\x3e" href\x3d"\x3c%- href %\x3e" target\x3d"_blank"\x3e\x3cdiv class\x3d"designSearchResultThumb" style\x3d"background-image:url(\x3c%- thumbnail %\x3e);"\x3e\x3c/div\x3e\x3cdiv class\x3d"designSearchResultDetail"\x3e\x3ch4 class\x3d"designSearchResultDetailTitle"\x3e\x3c%- title %\x3e\x3c/h4\x3e\x3cspan class\x3d"designSearchResultDetailSummary"\x3e\x3c%- designType %\x3e\x3c/span\x3e\x3c/div\x3e\x3c/a\x3e');function Ug(a){ja(0<a.size,"invalid avatar size {}",a.size);Backbone.View.call(this,{className:"avatar"});this.Za=a.Za||null;this.Ra=a.Ra||null;this.wa=a.wa||null;this.size=a.size;this.ra=!!a.ra;this.sa=!!a.sa;this.va=!!a.va;this.oa=!!a.oa}ha(Ug,Backbone.View);
Ug.prototype.render=function(){var a=this.Za&&this.Ra,b=!!this.Ra;this.$el.css({width:this.size+"px",height:this.size+"px",lineHeight:this.size/2+"px"});this.Za&&this.$el.css("backgroundImage","url("+this.Za+")");a?(this.$el.addClass("avatar--composite"),this.$el.css("fontSize",this.size/4+"px")):b&&(this.$el.addClass("avatar--brand"),this.$el.css("fontSize",this.size/2+"px"));this.Ra&&this.$el.attr("data-letter",this.Ra);this.wa&&(this.$el.css("backgroundColor",this.wa.Wb()),a=this.wa,208<Math.round(Math.sqrt(.241*
a.r*a.r+.691*a.g*a.g+.068*a.b*a.b))&&this.$el.addClass("avatar--light"));this.$el.toggleClass("avatar--whiteBorder",this.va);this.$el.toggleClass("avatar--darkBorder",this.oa);this.$el.toggleClass("avatar--glow",this.ra);this.$el.toggleClass("avatar--pointer",this.sa);return this};function Sg(a){return(a.aa()||"Brand").toUpperCase().trim().replace(/^THE\s+/,"").charAt(0)}function Tg(a){a=a.ze();return $f(a?"#"+a:"#b0b0b0")}
function ph(a,b){a=a.nc().ye();la(0<Object.keys(a).length,"avatar bundle is empty");var c=b*(window.devicePixelRatio||1);return _.chain(a).values().sortBy(function(a){return Math.abs(a.size-c)}).sortBy(function(a){return a.size<c}).first().value().ma()}function Rg(a){var b=ph(a.i,a.size);a=new Ug({Za:b,size:a.size,ra:a.ra,sa:a.sa,va:a.va,oa:a.oa});a.render();return a}
function Pg(a){if(a.j.Cb())return Rg(a);var b=ph(a.i,a.size),c=Sg(a.j),e=Tg(a.j);a=new Ug({Za:b,Ra:c,wa:e,size:a.size,ra:a.ra,sa:a.sa,va:a.va,oa:a.oa});a.render();return a};$(function(){function a(){var a=Pg({i:v,j:Pb,size:40,ra:!1,oa:!0,sa:!0}),b=$("#wholePage \x3e .sidebar");a.$el.appendTo(b.find(".currentUser \x3e .avatars"));return new Sc({el:b[0],F:u})}function b(){var a=new Gb,b=$(".currentUser .displayNames, .avatars"),c=$(".userDisplayName",b),a=new ag({td:n,Ga:q,ue:!!a.ld.get(Hb)}),e=O;e.v||(e.v=new hb(e.ka));return new Yg({analytics:k,v:e.v,profiles:q,Oc:a,Uc:Pb,i:v,Od:c,La:b,Vb:"displayNamesActivated",Wc:null==N.getSubscription(),za:f,Wd:"homepage_user_menu"})}
function c(){var a=$("#showNotificationMenu"),b=a.find(".notificationsLabel");return new Bc({gf:a,analytics:k,cd:e,Cc:b,Mc:m})}function e(){var a=Af,b=v.o(),c=O;c.Cd||(c.Cd=new ib(c.ka));return new a({ed:b,G:c.Cd,position:["leftTop","top"]})}function f(){var a;a=xf;a=[Object.freeze(x(F,a.jb.paidMonthly)),Object.freeze(x(F,a.jb.paidYearly))];a={analytics:k,j:Pb,Rb:a,O:a.length?a[0].xb():void 0,jh:yf,Ia:qh,Ga:q,ca:!0,$a:!1,Ub:!1,u:O,Gf:z};var b=!!a.Gf.ld.get(Jb),c;c={sb:a.Ia,j:a.j.o(),fa:a.jh,ab:!0,
N:Ea(a.u)};var e=new Tf({gc:!1!==c.gc,N:c.N});c=new Of({sb:c.sb,j:c.j,K:c.K,ab:c.ab,fa:c.fa,view:e});c=new af({analytics:a.analytics,Ia:a.Ia,Ga:a.Ga,j:a.j,na:c,Ub:a.Ub,u:a.u,view:bf({compact:!0,u:a.u,Rb:a.Rb,O:a.O,R:b})});return new rf({analytics:a.analytics,$a:a.$a,ca:a.ca,lf:Ca(a.u),Y:a.Y,O:a.O,Xa:c,R:b})}function g(){$("#sidebarFacebookSignupButton").click(function(){xb(k,"signup","logged_out_homepage","user_profile",{auth_mode:"facebook"})});$("#sidebarEmailSignupButton").click(function(){xb(k,
"signup","logged_out_homepage","user_profile",{auth_mode:"email"})})}$("body").toggleClass("highDpi",ub);$(".mobileHeaderHamburger").on("click",function(){$("body").toggleClass("mobileMenuOn")});var k=Cb(),n=vc(),q=new Tc(n),m=new Gd(n),p=ah(),v=p.user.Ye(),z=new Gb,N=p.brandInfo,Pb=N.D(),O;if(!window.cmsg)throw Error("window['cmsg'] isn't defined");O=new za;var xf=new Gg,yf=Lf(),qh=new de(n),p=!(!window.homeConfig||!window.homeConfig.showUpgradeDialog),rh=!(!window.homeConfig||!window.homeConfig.userCreated);
v.Ce()?g():(p=new Qc({analytics:k,Ib:c(),Xd:b(),view:a(),za:f,Pd:p,Pc:rh}),p.start());z.ld.get(Ib)&&new eh({jd:new Kb(n),Bd:1,openWindow:window.open.bind(window),u:O,J:new mh({Qb:Ga(O).format("designSearchSidebarPlaceholderText"),el:$(".sidebarSearch"),Ac:$(".sidebarSearch").parent()}),dd:oh.create,analytics:k})});})();
